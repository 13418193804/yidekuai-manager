{"version":3,"sources":["webpack:///./src/components/system/department.vue?3dee","webpack:///./src/components/system/department.vue?90ab","webpack:///./src/components/system/department.vue"],"names":["_super","AddGoods","_this","apply","this","arguments","loading","model","checkboxGroup6","parentId","departmentForm","modelType","row","currentObject","filterText","tableTree","id","label","value","children","defaultProps","roleList","options","tslib_es6","prototype","watchCount","newVal","oldVal","console","log","$refs","tree2","filter","changeModel","type","a","Object","assign","forEach","item","index","push","roleId","queryDepartmentAtMySelf","res","unshift","getRoleList","departmentId","data","indexApi","then","roleIdModel_1","$alert","error","callback","list","doDelete","$confirm","confirmButtonText","cancelButtonText","$message","getDepartmentAllList","getDepartment","catch","message","doSubmit","length","join","filterNode","indexOf","doNodeClick","object","node","control","roletoString","roleName","department","getallRoleList","mounted","vue_property_decorator_umd","vue_class_component_common_default","props","components","vue_esm","system_department","render","_vm","_h","$createElement","_c","_self","directives","name","rawName","expression","staticStyle","border-bottom","_v","margin","min-width","attrs","gutter","xs","sm","md","lg","xl","margin-bottom","size","on","click","$event","margin-top","border","padding","placeholder","$$v","ref","staticClass","expand-on-click-node","default-expand-all","highlight-current","filter-node-method","node-click","width","stripe","fixed","prop","scopedSlots","_u","key","fn","scope","_s","$index","visible","center","title","close-on-click-modal","top","update:visible","label-width","max-width","$set","change-on-select","_l","slot","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"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","file":"static/js/13.cf28bc4dd574b83fbfbc.js","sourcesContent":["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\r\nimport Vue from \"vue\";\r\nimport Component from \"vue-class-component\";\r\nimport axios from \"axios\";\r\nimport * as indexApi from \"../../api/indexApi\";\r\nimport { Watch } from \"vue-property-decorator\";\r\n\r\n@Component({\r\n  props: {},\r\n  components: {\r\n    // categoryView,\r\n  }\r\n})\r\nexport default class AddGoods extends Vue {\r\n  @Watch(\"filterText\")\r\n  watchCount(newVal, oldVal) {\r\n    console.log(\"newVal\", newVal, \"oldVal\", oldVal);\r\n    let a: any = this.$refs.tree2;\r\n    a.filter(newVal);\r\n  }\r\n\r\n\r\n  loading = false\r\n    model = false;\r\n    checkboxGroup6=[]\r\n    parentId = []\r\ndepartmentForm:any={\r\n}\r\n  modelType ='add'\r\n  row = {}\r\nchangeModel(type,row) {\r\n    this.modelType = type;\r\n    this.departmentForm = {};\r\n    this.checkboxGroup6 = [];\r\n    this.parentId = []\r\n    if (type=='edit') {\r\n      let a = {};\r\n      Object.assign(a,  row);\r\n      this.departmentForm = a;\r\n      this.row = row\r\n      row.roleList.forEach((item,index)=>{\r\n      this.checkboxGroup6.push( item.roleId)\r\n      })\r\n\r\n      if(row.parentId){\r\n        this.queryDepartmentAtMySelf(row.parentId,res=>{\r\n          if(res){\r\n            console.log('附上去的角色list',res)\r\n            \r\n             this.parentId = res\r\n             this.parentId.unshift(\"\");\r\n          }\r\n        })\r\n      }else{\r\n             this.parentId = [\"\"];\r\n      }\r\n\r\n\r\n\r\n    }\r\n    this.model = true;\r\n  }\r\ngetRoleList(departmentId) {\r\nlet data = {}\r\nif(departmentId){\r\n  Object.assign(data,{departmentId: departmentId})\r\n}\r\n    indexApi\r\n      .queryRoleList(data)\r\n      .then(res => {\r\n        if (res[\"retCode\"]) {\r\n          if(departmentId){\r\nlet roleIdModel:any = []\r\n            res.data.roleList.forEach((item,index)=>{\r\n             roleIdModel.push( item.roleId)\r\n            })\r\n            this.checkboxGroup6 = roleIdModel\r\n          }\r\n\r\n        } else {\r\n          if (!res[\"islogin\"]) {\r\n            this.$alert(res[\"message\"]);\r\n          }\r\n          console.error(\"数据查询错误\");\r\n        }\r\n      });\r\n  }\r\n  queryDepartmentAtMySelf(departmentId,callback){\r\n  indexApi.queryDepartmentAtMySelf({\r\n    departmentId:departmentId\r\n  }).then(res => {\r\n            \r\n        if (res[\"retCode\"]) {\r\n          callback(res.data.list)\r\n        } else {\r\n          callback(null)\r\n          if (!res[\"islogin\"]) {\r\n            this.$alert(res[\"message\"]);\r\n          }\r\n          console.error(\"数据查询错误\");\r\n        }\r\n      });\r\n\r\n}\r\n  doDelete(index,row){\r\n this.$confirm(\"删除该部门？\", \"提示\", {\r\n      confirmButtonText: \"确定\",\r\n      cancelButtonText: \"取消\",\r\n      type: \"warning\"\r\n    })\r\n      .then(() => {\r\n  \r\n indexApi.deleteDepartment({departmentId:row.departmentId}).then(res => {\r\n      if (res[\"retCode\"]) {\r\n          this.$message('已删除一条部门记录')\r\n          this.getDepartmentAllList(this.row['departmentId']);\r\n    this.getDepartment();\r\n          \r\n      } else {\r\n        if(!res['islogin']){this.$alert(res[\"message\"]);}\r\n        console.error(\"数据查询错误\");\r\n      }\r\n    });\r\n\r\n\r\n      })\r\n      .catch(() => {\r\n        this.$message({\r\n          type: \"info\",\r\n          message: \"已取消操作\"\r\n        });\r\n      });\r\n\r\n\r\n  }\r\ndoSubmit(){\r\n\r\n\r\n\r\n  this.departmentForm['parentId'] = this.parentId[this.parentId.length-1]\r\n     this.departmentForm['roleId'] =   this.checkboxGroup6.join(',');\r\n\r\n  if(this.modelType =='add'){\r\n  indexApi.adddepartmentModel(  this.departmentForm).then(res=>{\r\n                if (res[\"retCode\"]) {\r\n                  this.$message('保存成功')\r\n                  this.getDepartment();\r\n                  this.getDepartmentAllList(this.row['departmentId'])\r\n    this.model = false;\r\n            } else {\r\n              if(!res['islogin']){this.$alert(res[\"message\"]);}\r\n              console.error(\"数据查询错误\");\r\n            }\r\n          })\r\n  }else{\r\nindexApi.aupdatedepartmentModel(  this.departmentForm).then(res=>{\r\n                if (res[\"retCode\"]) {\r\n                  this.$message('保存成功')\r\n                  this.getDepartment();\r\n                  this.getDepartmentAllList(this.row['departmentId'])\r\n    this.model = false;\r\n            } else {\r\n              if(!res['islogin']){this.$alert(res[\"message\"]);}\r\n              console.error(\"数据查询错误\");\r\n            }\r\n          })\r\n\r\n\r\n\r\n  }\r\n\r\n\r\n\r\n}\r\n  filterNode(value, data) {\r\n\r\n    if (!value) return true;\r\n    return data.label.indexOf(value) !== -1;\r\n    \r\n  }\r\n  currentObject = {}\r\n\r\n  doNodeClick(object, node, control) {\r\n       \r\n// object.departmentId\r\nthis.row = object\r\n          this.getDepartmentAllList(object.departmentId);\r\n          \r\n    }\r\n\r\n  filterText = \"\";\r\n  tableTree = [\r\n    {\r\n      id: 1,\r\n      label: \"所有部门\",\r\n      value:'',\r\n      children: {}\r\n    }\r\n  ];\r\n  defaultProps = {\r\n    children: \"children\",\r\n    label: \"label\"\r\n  };\r\n\r\n  roleList = [];\r\n\r\n    roletoString(list){\r\n    let a = []\r\n  list.forEach((item,index)=>{\r\n    a.push(item.roleName)\r\n    return \r\n  })\r\nreturn a.join(',')\r\n  }\r\n\r\n  getDepartmentAllList(departmentId) {\r\n    indexApi.getDepartmentAllList({\r\ndepartmentId:departmentId\r\n    }).then(res => {\r\n\r\n      this.loading = false\r\n      if (res[\"retCode\"]) {\r\n          this.roleList = res.data.department \r\n      } else {\r\n        if(!res['islogin']){this.$alert(res[\"message\"]);}\r\n        console.error(\"数据查询错误\");\r\n      }\r\n    });\r\n\r\n\r\n\r\n\r\n\r\n  }\r\n \r\n\r\ngetDepartment() {\r\n    indexApi.getDepartment({}).then(res => {\r\n      console.log(res);\r\n      if (res[\"retCode\"]) {\r\n        this.tableTree[0].children = res.data.children;\r\n        console.log(\"获取部门树\", res.data);\r\n      } else {\r\n        if(!res['islogin']){this.$alert(res[\"message\"]);}\r\n        console.error(\"数据查询错误\");\r\n      }\r\n    });\r\n  }\r\n  options = []\r\n    getallRoleList() {\r\n\r\n    indexApi.queryRoleList({}).then(res => {\r\n      if (res[\"retCode\"]) {\r\n        this.options = res.data.roleList \r\n      } else {\r\n        if(!res['islogin']){this.$alert(res[\"message\"]);}\r\n        console.error(\"数据查询错误\");\r\n      }\r\n    });\r\n  }\r\n  mounted() {\r\n      this.loading = true\r\n    \r\n    this.getDepartment();\r\n    this.getallRoleList();\r\n    this.getDepartmentAllList('')\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./node_modules/vue-loader/lib/selector.js?type=script&index=0!./src/components/system/department.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{directives:[{name:\"loading\",rawName:\"v-loading\",value:(_vm.loading),expression:\"loading\"}]},[_c('div',{staticStyle:{\"border-bottom\":\"1px #e5e5e5 solid\"}},[_c('h3',[_vm._v(\"部门管理\\n          \")]),_vm._v(\" \"),_c('el-row',{staticStyle:{\"margin\":\"20px 20px 0\",\"min-width\":\"180px\"},attrs:{\"gutter\":24}},[_c('el-col',{attrs:{\"xs\":24,\"sm\":24,\"md\":24,\"lg\":7,\"xl\":6}},[_c('el-button',{staticStyle:{\"margin-bottom\":\"20px\"},attrs:{\"size\":\"mini\",\"type\":\"primary\"},on:{\"click\":function($event){_vm.changeModel('add')}}},[_vm._v(\"添加部门\")])],1)],1)],1),_vm._v(\" \"),_c('el-row',{staticStyle:{\"margin\":\"10px\"},attrs:{\"gutter\":24}},[_c('el-col',{staticStyle:{\"margin-top\":\"20px\"},attrs:{\"xs\":24,\"sm\":24,\"md\":24,\"lg\":7,\"xl\":10}},[_c('div',{staticStyle:{\"border\":\"solid 1px #e5e5e5\",\"padding\":\"10px\"}},[_c('el-input',{attrs:{\"placeholder\":\"输入关键字进行过滤\"},model:{value:(_vm.filterText),callback:function ($$v) {_vm.filterText=$$v},expression:\"filterText\"}}),_vm._v(\" \"),_c('el-tree',{ref:\"tree2\",staticClass:\"filter-tree\",attrs:{\"data\":_vm.tableTree,\"props\":_vm.defaultProps,\"expand-on-click-node\":false,\"default-expand-all\":\"\",\"highlight-current\":\"\",\"filter-node-method\":_vm.filterNode},on:{\"node-click\":_vm.doNodeClick}})],1)]),_vm._v(\" \"),_c('el-col',{staticStyle:{\"margin-top\":\"20px\"},attrs:{\"xs\":24,\"sm\":24,\"md\":24,\"lg\":15,\"xl\":14}},[_c('el-table',{staticStyle:{\"width\":\"100%\"},attrs:{\"border\":\"\",\"data\":_vm.roleList,\"stripe\":\"\"}},[_c('el-table-column',{attrs:{\"fixed\":\"left\",\"prop\":\"name\",\"label\":\"部门名称\",\"width\":\"150\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"parentName\",\"label\":\"上级部门\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"label\":\"部门角色\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_vm._v(\"\\n        \"+_vm._s(_vm.roletoString(scope.row.roleList))+\"\\n      \")]}}])}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"TotalUserNum\",\"label\":\"用户数量\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"label\":\"操作\",\"fixed\":\"right\",\"width\":\"170\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-button',{staticStyle:{\"margin-bottom\":\"20px\"},attrs:{\"size\":\"mini\",\"type\":\"primary\"},on:{\"click\":function($event){_vm.changeModel('edit',scope.row)}}},[_vm._v(\"编辑\")]),_vm._v(\" \"),_c('el-button',{staticStyle:{\"margin-bottom\":\"20px\"},attrs:{\"size\":\"mini\",\"type\":\"text\"},on:{\"click\":function($event){_vm.doDelete(scope.$index,scope.row)}}},[_vm._v(\"删除\")])]}}])})],1)],1)],1),_vm._v(\" \"),_c('el-dialog',{attrs:{\"visible\":_vm.model,\"width\":\"1050px\",\"center\":\"\",\"size\":\"tiny\",\"title\":_vm.modelType =='add' ?'添加部门':'编辑部门',\"close-on-click-modal\":false,\"top\":\"40px\"},on:{\"update:visible\":function($event){_vm.model=$event}}},[_c('el-form',{attrs:{\"label-width\":\"120px\"}},[_c('el-form-item',{attrs:{\"label\":\"部门名称\"}},[_c('el-input',{staticStyle:{\"max-width\":\"400px\"},model:{value:(_vm.departmentForm.name),callback:function ($$v) {_vm.$set(_vm.departmentForm, \"name\", $$v)},expression:\"departmentForm.name\"}})],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"上级部门\"}},[_c('el-cascader',{attrs:{\"options\":_vm.tableTree,\"change-on-select\":\"\"},model:{value:(_vm.parentId),callback:function ($$v) {_vm.parentId=$$v},expression:\"parentId\"}})],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"职位名称\"}},[_c('div',[_c('el-checkbox-group',{attrs:{\"size\":\"mini\"},model:{value:(_vm.checkboxGroup6),callback:function ($$v) {_vm.checkboxGroup6=$$v},expression:\"checkboxGroup6\"}},_vm._l((_vm.options),function(item,index){return _c('el-checkbox',{attrs:{\"label\":item.roleId,\"border\":\"\"}},[_vm._v(_vm._s(item.roleName))])}))],1)])],1),_vm._v(\" \"),_c('span',{staticClass:\"dialog-footer\",attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('el-button',{on:{\"click\":function($event){_vm.model = false}}},[_vm._v(\"取 消\")]),_vm._v(\" \"),_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.doSubmit}},[_vm._v(\"确 定\")])],1)],1)],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-3b74f62f\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/system/department.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-3b74f62f\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./department.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!ts-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./department.vue\"\nimport __vue_script__ from \"!!ts-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./department.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-3b74f62f\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./department.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-3b74f62f\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/system/department.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}