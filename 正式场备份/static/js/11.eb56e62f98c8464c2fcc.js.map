{"version":3,"sources":["webpack:///./src/components/system/role.vue?9277","webpack:///./src/components/system/role.vue?958b","webpack:///./src/components/system/role.vue"],"names":["_super","AddGoods","_this","apply","this","arguments","roleForm","checkboxGroup6","model","modelType","roleList","keyword","options","departmentId","page","pageSize","total","allCount","AuthorityList","tslib_es6","prototype","handleDelete","index","row","$confirm","confirmButtonText","cancelButtonText","type","then","console","log","indexApi","roleId","res","$message","getRoleList","$alert","error","catch","message","changeModel","a","Object","assign","roleGetPrimss","data","rolepermission","length","forEach","item","push","permissionId","roleBindPrimss","permissionIdList","join","doSubmit","onPageChange","getDepartment","children","unshift","label","name","value","alloCount","num","getPermission","mounted","vue_class_component_common_default","props","components","vue_esm","system_role","render","_vm","_h","$createElement","_c","_self","staticStyle","border-bottom","_v","margin","_s","padding-bottom","attrs","gutter","xs","sm","md","lg","xl","margin-top","callback","$$v","expression","placeholder","clearable","min-width","icon","on","click","$event","width","min-height","border","stripe","prop","scopedSlots","_u","key","fn","scope","roleAvailable","fixed","size","$index","staticClass","span","layout","page-size","current-change","visible","center","title","close-on-click-modal","top","update:visible","label-width","max-width","$set","_l","slot","staticRenderFns","Component","__webpack_require__","normalizeComponent","role","ssrContext","__webpack_exports__"],"mappings":"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","file":"static/js/11.eb56e62f98c8464c2fcc.js","sourcesContent":["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\r\nimport Vue from \"vue\";\r\nimport Component from \"vue-class-component\";\r\nimport axios from \"axios\";\r\nimport * as indexApi from \"../../api/indexApi\";\r\n\r\n@Component({\r\n  props: {},\r\n  components: {\r\n    // categoryView,\r\n  }\r\n})\r\nexport default class AddGoods extends Vue {\r\n  handleDelete(index, row) {\r\n    this.$confirm(\"此操作将删除该职位, 是否继续?\", \"提示\", {\r\n      confirmButtonText: \"确定\",\r\n      cancelButtonText: \"取消\",\r\n      type: \"warning\"\r\n    })\r\n      .then(() => {\r\n        console.log(row);\r\n\r\n        indexApi\r\n          .deleteRoleModel({\r\n            roleId: row.roleId\r\n          })\r\n          .then(res => {\r\n            if (res[\"retCode\"]) {\r\n              this.$message(\"删除成功\");\r\n              this.getRoleList();\r\n            } else {\r\n              if(!res['islogin']){this.$alert(res[\"message\"]);}\r\n              console.error(\"数据查询错误\");\r\n            }\r\n          });\r\n        // role_id\r\n      })\r\n      .catch(() => {\r\n        this.$message({\r\n          type: \"info\",\r\n          message: \"已取消删除\"\r\n        });\r\n      });\r\n  }\r\n\r\n  roleForm = {};\r\ncheckboxGroup6 = []\r\n  model = false;\r\n  modelType = \"add\";\r\n\r\n\r\n  changeModel(type, row) {\r\n\r\n    this.modelType = type;\r\n    this.roleForm = {};\r\n    if (row) {\r\n      console.log('编辑')\r\n      let a = {};\r\n      Object.assign(a, row);\r\n      this.roleForm = a;\r\n      this.roleForm[\"role\"] = this.roleForm[\"roleName\"];\r\n      this.roleForm[\"description\"] = this.roleForm[\"roleDescription\"];\r\n      this.roleForm[\"role_id\"] = this.roleForm[\"roleId\"];\r\n    this.roleGetPrimss(row);\r\n    }\r\n    this.model = true;\r\n  }\r\n\r\n  roleGetPrimss(row){\r\nindexApi.roleGetPrimss(\r\n {roleId: row.roleId}\r\n).then(res => {\r\n        if (res[\"retCode\"]) {\r\n\r\n        this.checkboxGroup6 = []\r\n        console.log(res.data.rolepermission)\r\n if(res.data.rolepermission.length>0){res.data.rolepermission.forEach((item)=>{\r\n       this.checkboxGroup6.push( item.permissionId)\r\n  })\r\n        }\r\n        } else {\r\n          if(!res['islogin']){this.$alert(res[\"message\"]);}\r\n          console.error(\"数据查询错误\");\r\n        }\r\n      });\r\n\r\n  }\r\nroleBindPrimss(){\r\n\r\n// roleBindPrimss\r\n\r\nindexApi.roleBindPrimss(\r\n {roleId: this.roleForm['roleId'],\r\n permissionIdList:this.checkboxGroup6.join(',')\r\n }\r\n).then(res => {\r\n  console.log('更新权限',res)\r\n        if (res[\"retCode\"]) {\r\n          \r\n        } else {\r\n          if(!res['islogin']){this.$alert(res[\"message\"]);}\r\n          console.error(\"数据查询错误\");\r\n        }\r\n      });\r\n\r\n\r\n}\r\n\r\n  doSubmit() {\r\n  if((this.roleForm['role']||'')==''){\r\nthis.$alert('请输入职位名称')\r\nreturn\r\n  }\r\n  if((this.roleForm['description']||'')==''){\r\nthis.$alert('请输入职位描述')\r\n    return\r\n  }\r\n\r\n    if (this.modelType == \"add\") {\r\n      indexApi.addRoleModel(this.roleForm).then(res => {\r\n        if (res[\"retCode\"]) {\r\n          this.$message(\"添加成功\");\r\n          this.getRoleList();\r\n          console.log(res)\r\n              // 更新权限问题\r\n              this.roleForm['roleId'] =  res.data.roleId\r\nthis.roleBindPrimss()\r\n          this.model = false;\r\n        } else {\r\n          if(!res['islogin']){this.$alert(res[\"message\"]);}\r\n          console.error(\"数据查询错误\");\r\n        }\r\n      });\r\n    } else {\r\n      indexApi.updateRoleModel(this.roleForm).then(res => {\r\n        if (res[\"retCode\"]) {\r\n          this.$message(\"保存成功\");\r\n          this.getRoleList();\r\n              // 更新权限问题\r\nthis.roleBindPrimss()\r\n          this.model = false;\r\n        } else {\r\n          if(!res['islogin']){this.$alert(res[\"message\"]);}\r\n          console.error(\"数据查询错误\");\r\n        }\r\n      });\r\n    \r\n    }\r\n\r\n  \r\n\r\n  }\r\n  roleList = [];\r\n  keyword = \"\";\r\n\r\n  options = [];\r\n  departmentId = \"\";\r\n\r\n  page = 0;\r\n  pageSize = 10;\r\n  total = 100;\r\n  onPageChange(page) {\r\n    this.page = page - 1;\r\n    this.getRoleList();\r\n  }\r\n\r\n  getRoleList() {\r\n    let departmentId = \"\";\r\n    if (this.departmentId.length > 0) {\r\n      departmentId = this.departmentId[this.departmentId.length - 1];\r\n    }\r\n    indexApi\r\n      .queryRoleList({\r\n        keyword: this.keyword,\r\n        departmentId: departmentId,\r\n        page: this.page,\r\n        pageSize: this.pageSize\r\n      })\r\n      .then(res => {\r\n        if (res[\"retCode\"]) {\r\n          this.roleList = res.data.roleList;\r\n          this.total = res.data.page.total\r\n        } else {\r\n          if(!res['islogin']){this.$alert(res[\"message\"]);}\r\n          console.error(\"数据查询错误\");\r\n        }\r\n      });\r\n  }\r\n  getDepartment() {\r\n    indexApi.getDepartment({}).then(res => {\r\n      console.log(res);\r\n      if (res[\"retCode\"]) {\r\n        this.options = res.data.children;\r\n\r\n        this.options.unshift({\r\n          departmentId: \"\",\r\n          label: \"全部\",\r\n          name: \"全部\",\r\n          value: \"\"\r\n        });\r\n        console.log(\"获取部门树\", res.data);\r\n      } else {\r\n        if(!res['islogin']){this.$alert(res[\"message\"]);}\r\n        console.error(\"数据查询错误\");\r\n      }\r\n    });\r\n  }\r\n  allCount = 0;\r\n\r\n  alloCount() {\r\n    indexApi.allCountrole().then(res => {\r\n      console.log(res);\r\n      if (res[\"retCode\"]) {\r\n        this.allCount = res.data.num;\r\n      } else {\r\n        if(!res['islogin']){this.$alert(res[\"message\"]);}\r\n        console.error(\"数据查询错误\");\r\n      }\r\n    });\r\n  }\r\n  AuthorityList = []\r\n  getPermission() {\r\n    indexApi.getPermission({}).then(res => {\r\n      if (res[\"retCode\"]) {\r\n        this.AuthorityList = res.data.AuthorityList;\r\n      } else {\r\n        if(!res['islogin']){this.$alert(res[\"message\"]);}\r\n        console.error(\"数据查询错误\");\r\n      }\r\n    });\r\n  }\r\n\r\n  mounted() {\r\n    this.alloCount();\r\n    this.getRoleList();\r\n    this.getDepartment();\r\n\r\n    this.getPermission();\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./node_modules/vue-loader/lib/selector.js?type=script&index=0!./src/components/system/role.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('div',{staticStyle:{\"border-bottom\":\"1px #e5e5e5 solid\"}},[_c('h3',[_vm._v(\"职位管理\\n          \")]),_vm._v(\" \"),_c('div',{staticStyle:{\"margin\":\"10px 0\"}},[_vm._v(\"\\n平台职位数量统计：\"+_vm._s(_vm.allCount)+\"             \\n            \")]),_vm._v(\" \"),_c('div',{staticStyle:{\"padding-bottom\":\"20px\"}},[_c('el-row',{attrs:{\"gutter\":10}},[_c('el-col',{attrs:{\"xs\":8,\"sm\":8,\"md\":5,\"lg\":5,\"xl\":4}},[_c('el-cascader',{staticStyle:{\"margin-top\":\"20px\"},attrs:{\"options\":_vm.options},model:{value:(_vm.departmentId),callback:function ($$v) {_vm.departmentId=$$v},expression:\"departmentId\"}})],1),_vm._v(\" \"),_c('el-col',{attrs:{\"xs\":8,\"sm\":8,\"md\":5,\"lg\":5,\"xl\":5}},[_c('el-input',{staticStyle:{\"margin-top\":\"20px\"},attrs:{\"placeholder\":\"请输入职位名称\",\"clearable\":\"\"},model:{value:(_vm.keyword),callback:function ($$v) {_vm.keyword=$$v},expression:\"keyword\"}})],1),_vm._v(\" \"),_c('el-col',{staticStyle:{\"min-width\":\"100px\"},attrs:{\"xs\":5,\"sm\":5,\"md\":2,\"lg\":2,\"xl\":2}},[_c('el-button',{staticStyle:{\"margin-top\":\"20px\"},attrs:{\"type\":\"primary\",\"icon\":\"el-icon-search\"},on:{\"click\":function($event){_vm.getRoleList()}}},[_vm._v(\"查询\")])],1),_vm._v(\" \"),_c('el-col',{attrs:{\"xs\":5,\"sm\":5,\"md\":2,\"lg\":2,\"xl\":2}},[_c('el-button',{staticStyle:{\"margin-top\":\"20px\"},attrs:{\"type\":\"primary\"},on:{\"click\":function($event){_vm.changeModel('add')}}},[_vm._v(\"添加职位\")])],1)],1)],1)]),_vm._v(\" \"),_c('el-table',{staticStyle:{\"width\":\"100%\",\"min-height\":\"500px\"},attrs:{\"border\":\"\",\"data\":_vm.roleList,\"stripe\":\"\"}},[_c('el-table-column',{attrs:{\"prop\":\"name\",\"label\":\"部门名称\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"parentName\",\"label\":\"上级部门\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"roleName\",\"label\":\"职位名称\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"roleDescription\",\"label\":\"职位描述\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"userNum\",\"label\":\"用户数量\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"label\":\"职位状态\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-tag',{attrs:{\"type\":scope.row.roleAvailable ?'success':'info'}},[_vm._v(\"\\n               \"+_vm._s(scope.row.roleAvailable ?\"启用中\":\"已停用\"))])]}}])}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"label\":\"操作\",\"fixed\":\"right\",\"width\":\"300\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-button',{attrs:{\"size\":\"mini\",\"type\":\"primary\"},on:{\"click\":function($event){_vm.changeModel('edit',scope.row)}}},[_vm._v(\"编辑\")]),_vm._v(\" \"),_c('el-button',{attrs:{\"size\":\"mini\",\"type\":\"danger\"},on:{\"click\":function($event){_vm.handleDelete(scope.$index, scope.row)}}},[_vm._v(\"删除\")])]}}])})],1),_vm._v(\" \"),_c('el-col',{staticClass:\"toolbar\",attrs:{\"span\":24}},[_c('el-pagination',{attrs:{\"layout\":\"prev, pager, next\",\"page-size\":_vm.pageSize,\"total\":_vm.total},on:{\"current-change\":_vm.onPageChange}})],1),_vm._v(\" \"),_c('el-dialog',{attrs:{\"visible\":_vm.model,\"width\":\"1050px\",\"center\":\"\",\"size\":\"tiny\",\"title\":_vm.modelType =='add' ?'添加职位':'编辑职位',\"close-on-click-modal\":false,\"top\":\"40px\"},on:{\"update:visible\":function($event){_vm.model=$event}}},[_c('el-form',{attrs:{\"label-width\":\"120px\"}},[_c('el-form-item',{attrs:{\"label\":\"职位名称\"}},[_c('el-input',{staticStyle:{\"max-width\":\"400px\"},model:{value:(_vm.roleForm.role),callback:function ($$v) {_vm.$set(_vm.roleForm, \"role\", $$v)},expression:\"roleForm.role\"}})],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"职位描述\"}},[_c('el-input',{staticStyle:{\"max-width\":\"400px\"},model:{value:(_vm.roleForm.description),callback:function ($$v) {_vm.$set(_vm.roleForm, \"description\", $$v)},expression:\"roleForm.description\"}})],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"权限\"}},[_c('div',[_c('el-checkbox-group',{attrs:{\"size\":\"mini\"},model:{value:(_vm.checkboxGroup6),callback:function ($$v) {_vm.checkboxGroup6=$$v},expression:\"checkboxGroup6\"}},_vm._l((_vm.AuthorityList),function(item,index){return _c('el-checkbox',{attrs:{\"label\":item.permissionId,\"border\":\"\",\"value\":item.permissionId}},[_vm._v(_vm._s(item.name))])}))],1)])],1),_vm._v(\" \"),_c('span',{staticClass:\"dialog-footer\",attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('el-button',{on:{\"click\":function($event){_vm.model = false}}},[_vm._v(\"取 消\")]),_vm._v(\" \"),_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.doSubmit}},[_vm._v(\"确 定\")])],1)],1)],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-557e221e\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/system/role.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-557e221e\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./role.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!ts-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./role.vue\"\nimport __vue_script__ from \"!!ts-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./role.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-557e221e\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./role.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-557e221e\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/system/role.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}