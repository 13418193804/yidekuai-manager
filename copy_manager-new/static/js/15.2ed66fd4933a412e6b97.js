webpackJsonp([15],{a7vC:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var l=a("TToO"),i=a("7+uW"),r=a("c+8m"),o=a.n(r),n=a("RXoh"),s=a("PJh5"),d=a.n(s),c=a("YsZW"),p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.bigIcon="",e.viewBig=!1,e.page=0,e.loading=!1,e.total=0,e.drugList=[],e.pageSize=10,e.keyword="",e.date=[],e.dataType="",e.detailModel=!1,e.detail={row:{},remark:""},e}return l.b(e,t),e.prototype.viewBigIcon=function(t){this.bigIcon=t,this.viewBig=!0},e.prototype.handledataType1=function(t){switch(t){case"TRUTH":return"success";case"FICTITIOUS":return"warning";case"NONENTITY":return"danger";default:return""}},e.prototype.handledataType=function(t){switch(t){case"TRUTH":return"药品库";case"FICTITIOUS":return"虚拟库";case"NONENTITY":return"不在目录";default:return""}},e.prototype.onPageChange=function(t){this.page=t-1,this.requireDrugList()},e.prototype.requireDrugList=function(t){var e=this;void 0===t&&(t=null),t&&(this.page=0),this.loading=!0,n._34({keyword:this.keyword,startqueryTime:this.date&&this.date.length>0?d()(this.date[0]).format("YYYY-MM-DD")+" 00:00:00":"",endqueryTime:this.date&&this.date.length>0?d()(this.date[1]).format("YYYY-MM-DD")+" 23:59:59":"",dataType:this.dataType,page:this.page,pageSize:this.pageSize}).then(function(t){t.retCode?(e.drugList=t.data.InquireDrugsRecords,e.total=t.data.page.total):t.islogin||e.$alert(t.message),e.loading=!1})},e.prototype.handledrugFlag=function(t){return"1"===t?"医生":"患者"},e.prototype.selectDrug=function(t,e){this.detail.row=e,this.detail.row.picturesUrlList1=this.detail.row.picturesUrlList.map(function(t){return{presImageUrl:t}}),this.detail.row.picturesUrlList.length>0&&this.$refs.cropper.changePreImageUrl(0),this.detail.remark=e.remark,this.detailModel=!this.detailModel},e.prototype.doRemark=function(){var t=this;this.loading=!0,n._39({allDrugId:this.detail.row.allDrugId,remark:this.detail.remark}).then(function(e){t.loading=!1,e.retCode?(t.$message("保存成功"),t.detailModel=!t.detailModel,t.requireDrugList()):e.islogin||t.$alert(e.message),t.loading=!1})},e.prototype.mounted=function(){this.requireDrugList()},e=l.a([o()({props:{},components:{corpperlabel:c.a}})],e)}(i.default),u={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{directives:[{name:"bouncing",rawName:"v-bouncing",value:t.loading,expression:"loading"}]},[t._m(0),t._v(" "),a("div",{staticStyle:{}},[t._v("\n找药数量统计："+t._s(t.total)+"              \n            ")]),t._v(" "),a("div",{staticStyle:{"padding-bottom":"20px"}},[a("el-row",{attrs:{gutter:10}},[a("el-col",{attrs:{xs:16,sm:12,md:8,lg:5,xl:5}},[a("el-input",{staticStyle:{"margin-top":"20px"},attrs:{placeholder:"手机号码/姓名/药品名",clearable:""},model:{value:t.keyword,callback:function(e){t.keyword=e},expression:"keyword"}})],1),t._v(" "),a("el-col",{staticStyle:{"min-width":"360px"},attrs:{xs:2,sm:2,md:2,lg:2,xl:2}},[a("el-date-picker",{staticStyle:{"margin-top":"20px"},attrs:{type:"daterange",align:"right","unlink-panels":"","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:t.date,callback:function(e){t.date=e},expression:"date"}})],1),t._v(" "),a("el-col",{attrs:{xs:16,sm:12,md:8,lg:5,xl:5}},[a("el-select",{staticStyle:{"margin-top":"20px"},attrs:{placeholder:"请选择药品归属"},model:{value:t.dataType,callback:function(e){t.dataType=e},expression:"dataType"}},[a("el-option",{attrs:{value:"",label:"全部"}}),t._v(" "),a("el-option",{attrs:{value:"TRUTH",label:"药品库"}}),t._v(" "),a("el-option",{attrs:{value:"FICTITIOUS",label:"虚拟库"}}),t._v(" "),a("el-option",{attrs:{value:"NONENTITY",label:"不在目录"}})],1)],1),t._v(" "),a("el-col",{attrs:{xs:5,sm:5,md:3,lg:3,xl:2}},[a("el-button",{staticStyle:{"margin-top":"20px"},attrs:{type:"primary",icon:"el-icon-search"},on:{click:function(e){t.requireDrugList(!0)}}},[t._v("查询")])],1)],1)],1),t._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{height:"600",data:t.drugList,stripe:"",border:""}},[a("el-table-column",{attrs:{fixed:"left",label:"药品归属",width:"150"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-tag",{attrs:{type:t.handledataType1(e.row.dataType)}},[t._v(t._s(t.handledataType(e.row.dataType)))])]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"productName",label:"商品名",width:"150"}}),t._v(" "),a("el-table-column",{attrs:{prop:"commonName",label:"通用名",width:"150"}}),t._v(" "),a("el-table-column",{attrs:{prop:"specification",label:"规格",width:"150"}}),t._v(" "),a("el-table-column",{attrs:{prop:"packingUnit",label:"包装",width:"150"}}),t._v(" "),a("el-table-column",{attrs:{prop:"dosageforms",label:"剂型",width:"150"}}),t._v(" "),a("el-table-column",{attrs:{prop:"sellingPrice",label:"售价",width:"150"}}),t._v(" "),a("el-table-column",{attrs:{prop:"manufacturer",label:"厂家",width:"150"}}),t._v(" "),a("el-table-column",{attrs:{label:"医生/患者",width:"150"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n      "+t._s(t.handledrugFlag(e.row.memberFlag))+"\n      ")]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"name",label:"姓名",width:"150"}}),t._v(" "),a("el-table-column",{attrs:{prop:"phone",label:"电话",width:"150"}}),t._v(" "),a("el-table-column",{attrs:{prop:"remark","show-overflow-tooltip":"",label:"备注",width:"150"}}),t._v(" "),a("el-table-column",{attrs:{prop:"queryTime",label:"创建时间",width:"150"}}),t._v(" "),a("el-table-column",{attrs:{label:"操作",fixed:"right",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(a){t.selectDrug(e.$index,e.row)}}},[t._v("查看详情")])]}}])})],1),t._v(" "),a("el-col",{staticClass:"toolbar",attrs:{span:24}},[a("el-pagination",{attrs:{"current-page":t.page+1,layout:"prev, pager, next","page-size":t.pageSize,total:t.total},on:{"current-change":t.onPageChange}})],1),t._v(" "),a("el-dialog",{attrs:{width:"70vw","close-on-click-modal":!1,"append-to-body":!0,visible:t.detailModel,title:"详情"},on:{"update:visible":function(e){t.detailModel=e}}},[a("div",{staticClass:"flex",staticStyle:{"min-height":"500px"}},[this.detail.row.picturesUrlList&&this.detail.row.picturesUrlList.length>0?a("div",{staticClass:"flex-1"},[a("corpperlabel",{ref:"cropper",attrs:{preImageList:t.detail.row.picturesUrlList1}})],1):t._e(),t._v(" "),a("div",{staticClass:"flex-1"},[a("el-form",{staticClass:"demo-form-inline",attrs:{"label-width":"120px",model:t.detail.row}},[a("el-form-item",{staticStyle:{margin:"0"},attrs:{label:"商品名："}},[t._v("\n"+t._s(t.detail.row.productName)+"\n  ")]),t._v(" "),a("el-form-item",{staticStyle:{margin:"0"},attrs:{label:"通用名："}},[t._v("\n"+t._s(t.detail.row.commonName)+"\n  ")]),t._v(" "),a("el-form-item",{staticStyle:{margin:"0"},attrs:{label:"规格："}},[t._v("\n"+t._s(t.detail.row.specification)+"\n  ")]),t._v(" "),a("el-form-item",{staticStyle:{margin:"0"},attrs:{label:"包装："}},[t._v("\n"+t._s(t.detail.row.packingUnit)+"\n  ")]),t._v(" "),a("el-form-item",{staticStyle:{margin:"0"},attrs:{label:"剂型："}},[t._v("\n"+t._s(t.detail.row.dosageforms)+"\n  ")]),t._v(" "),a("el-form-item",{staticStyle:{margin:"0"},attrs:{label:"厂家："}},[t._v("\n"+t._s(t.detail.row.manufacturer)+"\n  ")]),t._v(" "),a("el-form-item",{staticStyle:{margin:"0"},attrs:{label:"医生/患者："}},[t._v("\n      "+t._s(t.handledrugFlag(t.detail.row.memberFlag))+"\n  ")]),t._v(" "),a("el-form-item",{staticStyle:{margin:"0"},attrs:{label:"姓名："}},[t._v("\n"+t._s(t.detail.row.name)+"\n  ")]),t._v(" "),a("el-form-item",{staticStyle:{margin:"0"},attrs:{label:"电话："}},[t._v("\n"+t._s(t.detail.row.phone)+"\n  ")]),t._v(" "),a("el-form-item",{staticStyle:{margin:"0"},attrs:{label:"创建时间："}},[t._v("\n"+t._s(t.detail.row.queryTime)+"\n  ")])],1),t._v(" "),a("el-form",{staticClass:"demo-form-inline",attrs:{"label-width":"120px"}},[a("el-form-item",{attrs:{label:"备注：",prop:"remark"}},[a("el-input",{staticStyle:{"max-width":"400px","min-width":"200px"},attrs:{type:"textarea",rows:4,placeholder:"请输入备注"},model:{value:t.detail.remark,callback:function(e){t.$set(t.detail,"remark",e)},expression:"detail.remark"}})],1),t._v(" "),a("el-form-item",[a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(e){t.doRemark()}}},[t._v("保存")])],1)],1)],1)])]),t._v(" "),a("el-dialog",{attrs:{visible:t.viewBig,width:"400px"},on:{"update:visible":function(e){t.viewBig=e}}},[a("img",{staticStyle:{width:"400px",height:"400px",margin:"-55px -20px -40px"},attrs:{src:t.bigIcon}})])],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{},[e("h3",[this._v("找药管理\n          ")])])}]};var m=a("VU/8")(p,u,!1,function(t){a("pumh")},"data-v-63b9bf33",null);e.default=m.exports},pumh:function(t,e){}});
//# sourceMappingURL=15.2ed66fd4933a412e6b97.js.map