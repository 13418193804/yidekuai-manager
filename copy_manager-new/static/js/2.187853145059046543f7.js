webpackJsonp([2],{"8ud+":function(e,t){},BAFi:function(e,t){},GpMq:function(e,t,i){e.exports=i.p+"static/img/img10.38fcfc5.png"},QXmb:function(e,t,i){e.exports=i.p+"static/img/img11.6e760cf.png"},arIc:function(e,t){$(function(){})},"de+h":function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=i("TToO"),r=i("7+uW"),s=i("c+8m"),l=i.n(s),o=i("RXoh"),n=i("YsZW"),c=i("FL7F"),d=i("k9eN"),p=i("K8i7"),u=(i("arIc"),function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.selectlabel=0,t.drugType="WESTERN",t.prodeInfo=[{title:"患者",list:[{title:"患者姓名：",value:"memberName",model:"memberName"},{title:"患者手机：",value:"memberPhone",model:"memberPhone"},{title:"患者性别：",value:"patientSex",model:"patientSex"},{title:"患者年龄：",value:"memberAge",model:"memberAge"},{title:"患者身份证：",value:"memberIdcard",model:"memberIdcard"},{title:"地址：",value:"consigneeAddress",model:"a"}]},{title:"地址",list:[]},{title:"医生",list:[{title:"医生姓名：",value:"docterName",model:"docterName"},{title:"医生电话：",value:"doctorMobile",model:"doctorMobile"},{title:"医生医院：",value:"hospitalName",model:"hospitalName"},{title:"科室：",value:"docterDept",model:"docterDept"},{title:"诊断：",value:"diagnose",model:"diagnose"}]}],t.activeNames=[0,1,2],t.usagesList=[],t.frequencyList=[],t.backLoad=!1,t.dosageList=[],t.packingUnitList=[],t.dosageformsList=[],t.DrugPriceList=[],t.drug={},t.allprescription=0,t.instructions="",t.model=!1,t.countPreByStatuObj={},t.loading=!1,t.presscriptionMoney=0,t.orderMoney=0,t.serviceMoney=0,t.preIndex=0,t.preDrugList=[],t.CHINESE_preDrugList=[],t.PASTE_preDrugList=[],t.WESTERN_preDrugList=[],t.INSTRUMENTS_preDrugList=[],t.tranRemake="",t.diagnosis="",t.checkPhone=/^1[345789]\d{9}$/,t.wei19list=[{guest:"硫黄",honour:"朴硝"},{guest:"水银",honour:"砒霜"},{guest:"狼毒",honour:"密陀僧"},{guest:"巴豆",honour:"牵牛"},{guest:"丁香",honour:"郁金"},{guest:"川乌",honour:"犀角"},{guest:"草乌",honour:"犀角"},{guest:"牙硝",honour:"三棱"},{guest:"官桂",honour:"赤石脂"},{guest:"人参",honour:"五灵脂"}],t.fan18list=[{guest:"甘草",honourList:[{honour:"甘遂"},{honour:"大戟"},{honour:"海藻"},{honour:"芫花"}]},{guest:"乌头",honourList:[{honour:"贝母"},{honour:"瓜蒌"},{honour:"半夏"},{honour:"白蔹"},{honour:"白芨"}]},{guest:"藜芦",honourList:[{honour:"人参"},{honour:"沙参"},{honour:"丹参"},{honour:"玄参"},{honour:"细辛"},{honour:"芍药"}]}],t.drugAdrugList=[],t.drugAdrugModel=!1,t.PreDrugType=[],t.dialogFormVisible=!1,t.checkList=[],t.preImageList=[],t.presId="",t.prodetail={},t.payModeEnum="",t.specificationList=[],t.partnerNameList=[],t.options4=[],t.value9=[],t.list=[],t.drugList=[],t.leftDis=!1,t.rightDis=!1,t.mobile="",t.filter_model=!1,t.filter_type="",t.resultList=[],t.noMessage_model=!1,t.noMessage_loading=!1,t.createForm={},t.dialogImageUrl="",t.dialogVisible=!1,t.dialogImageUrlList=[],t.dialogImageIndex=0,t.add_upload_loading=!1,t.fileUploadUrl="",t.provinceList=[],t.cityList=[],t.countryList=[],t.pres_type="",t.isReplaceDecocting=0,t.allDosage="1",t.everydayDosage="0",t.everytimeDosage="0",t.everydayTime="0",t.everytimes="0",t.howManyDay="0",t.sugarTypeList=["白冰糖","红糖","饴糖","蜂蜜","麦芽糖"],t.sugarType=[],t.aspartameList=["木糖醇","甜蜜素","元贞糖","蛋白糖"],t.aspartame=[],t.otherAccessoriesList=["益母草膏","黄酒","雪梨膏"],t.otherAccessories=[],t.replaceDecoctingMoneyOne=0,t.positionImageActive=!1,t.showlabel="druglist",t}return a.b(t,e),t.prototype.querySearch4=function(e,t){var i=this.partnerNameList;t((e?i.filter(this.createFilter(e)):i).map(function(e){return{value:e,partnerName:e.partnerName}}))},t.prototype.querySearch3=function(e,t){var i=this.frequencyList;t((e?i.filter(function(e){return function(t){return 0===t.partnerName.toLowerCase().indexOf(e.toLowerCase())}}):i).map(function(e){return{value:e.partnerName,label:e.partnerName}}))},t.prototype.querySearch2=function(e,t){var i=this.dosageList;t((e?i.filter(this.createFilter(e)):i).map(function(e){return{value:e,label:e}}))},t.prototype.querySearch1=function(e,t){var i=this.usagesList;t((e?i.filter(this.createFilter(e)):i).map(function(e){return{value:e,label:e}}))},t.prototype.createFilter=function(e){return function(t){return 0===t.toLowerCase().indexOf(e.toLowerCase())}},t.prototype.beforeAvatarUpload=function(e){var t="image/jpeg"===e.type,i=e.size/1024/1024<2;return t||this.$message.error("上传头像图片只能是 JPG 格式!"),i||this.$message.error("上传头像图片大小不能超过 2MB!"),t&&i},Object.defineProperty(t.prototype,"drug_total",{get:function(){var e=this.drug.quantity*this.drug.price;return e?parseFloat(e).toFixed(2):""},enumerable:!0,configurable:!0}),t.prototype.handleDoctor=function(){switch(this.prodetail.prescriptionType){case"BACK_HANDWORK":return this.createForm.docterId;case"PHOTO":return this.prodetail.docterId;default:return this.createForm.docterId}},t.prototype.selectDrug=function(e){this.drug={};var t=this.options4.filter(function(t){return e==t.drugId});this.drug.drugId=t[0].drugId,this.drug.commonName=t[0].commonName,this.drug.productName=t[0].productName,this.drug.typeName=t[0].typeName,this.drug.packingUnit=t[0].packingUnit,this.drug.producingArea=t[0].producingArea,this.drug.chineseType=t[0].chineseType,this.drug.codeId=t[0].codeId,"WESTERN"===this.drugType?this.drug.drugPrice=t[0].price:this.drug.price=t[0].price,this.drug.unitG=t[0].unitG,this.drug.hisCode=t[0].hisCode,this.drug.specification=t[0].specification,this.drug.drugPrice=t[0].drugPrice,this.drug.primarykeyID=t[0].drugId,this.drug.manufacturer=t[0].manufacturer,this.drug.packing_unit=t[0].packingUnit,this.drug.decoctingType=t[0].decoctingType,this.drug.chineseType=t[0].chineseType,this.commonList()},t.prototype.changePartnerName=function(){this.commonList()},t.prototype.chengedrugremarks=function(){var e=this;this.drug.price=this.DrugPriceList.filter(function(t){return e.drug.drugremarkspriceId==t.priceId})[0].sellingPrice},t.prototype.commonList=function(){var e=this,t=this.drugType;"PASTE_PRESCRIPTION"==this.drugType&&(t="CHINESE");var i={commonName:this.drug.commonName,drugType:t};this.drug.manufacturer&&Object.assign(i,{manufacturer:this.drug.manufacturer}),this.drug.specification&&Object.assign(i,{specification:this.drug.specification}),this.drug.partnerObj&&Object.assign(i,{partnerName:this.drug.partnerObj}),"WESTERN"==this.drugType&&Object.assign(i,{doctorId:this.handleDoctor()}),o._10(i).then(function(t){t.retCode?(t.data.partnerNameList&&(e.partnerNameList=t.data.partnerNameList,t.data.partnerNameList[0]&&!e.drug.partnerObj&&(e.drug.partnerObj=t.data.partnerNameList[0].partnerName,e.commonList())),t.data.packingUnitList&&(e.packingUnitList=t.data.packingUnitList,t.data.packingUnitList[0]&&(e.drug.packing_unit=t.data.packingUnitList[0])),t.data.dosageformsList&&(e.dosageformsList=t.data.dosageformsList,t.data.dosageformsList[0]&&(e.drug.dosageforms=t.data.dosageformsList[0])),t.data.usagesList&&(e.usagesList=t.data.usagesList,t.data.usagesList[0]&&(e.drug.usages=t.data.usagesList[0])),t.data.dosageList&&(e.dosageList=t.data.dosageList,t.data.dosageList[0]&&(e.drug.dosage=t.data.dosageList[0])),t.data.DrugPriceList&&(e.DrugPriceList=t.data.DrugPriceList,t.data.DrugPriceList[0]&&(e.drug.price=t.data.DrugPriceList[0].sellingPrice,e.drug.drugremarkspriceId=t.data.DrugPriceList[0].priceId)),t.data.frequencyList&&(e.frequencyList=t.data.frequencyList,t.data.frequencyList[0]&&(e.drug.frequency=t.data.frequencyList[0])),e.drug=Object.assign({},e.drug)):(t.islogin||e.$alert(t.message),console.error("数据查询错误"))})},t.prototype.allPrescription=function(){var e=this;o.o().then(function(t){t.retCode?e.allprescription=t.data.All:(t.islogin||e.$alert(t.message),console.error("数据查询错误"))})},Object.defineProperty(t.prototype,"notCount",{get:function(){return this.countPreByStatuObj.data5?this.countPreByStatuObj.data5.count:0},enumerable:!0,configurable:!0}),t.prototype.handleprescriptionType=function(e){switch(e){case"BACK_HANDWORK":return"线下订单";case"DOC_HANDWORK":return"直接开方";case"PHOTO":return"普通单";default:return""}},t.prototype.handleStatus=function(e){switch(e){case"NOT_TRANSLATED_PRESCRIPTION":return"未转方";case"ALREADY_TRANSLATED_PRESCRIPTION":return"已转方";case"FAIL_TRANSLATED_PRESCRIPTION":return"转方失败";case"REJECT_TRANSLATED_PRESCRIPTION":return"已驳回开方";case"ALREADY_AUDIT_PRESCRIPTION":return"已审方";case"FAIL_AUDIT_PRESCRIPTION":return"审方失败";case"GIVEUP_PRESCRIPTION":return"弃单";case"REJECT_AUDIT_PRESCRIPTION":return"/saveaudit"==this.$route.path?"已驳回转方":"审方退回";default:return""}},t.prototype.doSubmit=function(){this.doback()},t.prototype.doback=function(){var e=this;this.$confirm("确定退回该处方给开方医生?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.backLoad=!0,o.H({prescriptionId:e.presId,transDocName:sessionStorage.name,rejectContext:e.tranRemake}).then(function(t){e.backLoad=!1,t.retCode?(e.tranRemake="",t.data.nextPresId?e.getCountForList("xia",t.data.nextPresId):e.$router.push("/transmit")):(t.islogin||e.$alert(t.message),console.error("数据查询错误"))})}).catch(function(){e.$message({type:"info",message:"已取消操作"})})},t.prototype.countPreByStatu=function(){var e=this;o.v({}).then(function(t){t.retCode?e.countPreByStatuObj=t.data:(t.islogin||e.$alert(t.message),console.error("数据查询错误"))})},t.prototype.deletePreDrug=function(e,t){var i=this;this.$confirm("把该药品从处方单中移除？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){o.C({preDrugId:t.prescriptionDrugId}).then(function(e){e.retCode?(i.$message("已删除一条药品记录"),i.queryPresDrug()):(e.islogin||i.$alert(e.message),console.error("数据查询错误"))})}).catch(function(){i.$message({type:"info",message:"已取消操作"})})},t.prototype.handleClick=function(e){this.options4=[],this.drug={},this.instructions=""},t.prototype.docreateDrug=function(){var e=this;this.drug.quantity?this.drug.quantity>0?(this.drug.partnerName=this.drug.partnerObj,this.drug.prescriptionId=this.presId,this.drug.drugName=this.drug.commonName,this.drug.instructions=this.instructions,"CHINESE"==this.drugType&&(this.drug.preDrugType="CHINESE_MEDICINE"),"WESTERN"==this.drugType&&(this.drug.preDrugType="WESTERN_MEDICINE"),"PASTE_PRESCRIPTION"==this.drugType&&(this.drug.preDrugType="PASTE_PRESCRIPTION"),"INSTRUMENTS"==this.drugType&&(this.drug.preDrugType="INSTRUMENTS"),this.loading=!0,o.K(Object.assign(this.drug,{prescribeDoctorId:this.presId?this.prodetail.docterId:this.createForm.docterId})).then(function(t){e.loading=!1,t.retCode?("BACK_HANDWORK"==e.pres_type&&(e.presId=t.data.prescriptionId),e.drug={},e.instructions="",e.queryPresDrug()):(t.islogin||e.$alert(t.message),console.error("数据查询错误"))})):this.$alert("请输入正确的药品数量"):this.$alert("请输入药品数量")},t.prototype.queryPresDrug=function(){var e=this;o._39({preId:this.presId}).then(function(t){t.retCode?(e.preDrugList=t.data.data,e.CHINESE_preDrugList=t.data.data.filter(function(e){return"CHINESE_MEDICINE"==e.preDrugType}),e.PASTE_preDrugList=t.data.data.filter(function(e){return"PASTE_PRESCRIPTION"==e.preDrugType}),e.WESTERN_preDrugList=t.data.data.filter(function(e){return"WESTERN_MEDICINE"==e.preDrugType}),e.INSTRUMENTS_preDrugList=t.data.data.filter(function(e){return"INSTRUMENTS"==e.preDrugType}),e.serviceMoney=t.data.serviceMoney):(t.islogin||e.$alert(t.message),console.error("数据查询错误"))})},t.prototype.dotransmit=function(){var e=this;if("BACK_HANDWORK"===this.pres_type||"DOC_HANDWORK"==this.pres_type){if(""===(this.createForm.docterId||""))return void this.$message("请选择医生");if(""===(this.createForm.memberName||""))return void this.$message("请输入患者姓名");if(""!==(this.createForm.memberAge||"")&&!/^(?:[0-9][0-9]?|1[012][0-9]|130)$/.test(this.createForm.memberAge))return void this.$message("请输入0-130岁的年龄");if(""===(this.createForm.memberPhone||""))return void this.$message("请输入患者手机号");if(!this.checkPhone.test(this.createForm.memberPhone))return void this.$message("请输入正确的患者手机号");if(""!==(this.createForm.memberIdcard||""))return void this.vaild_memberIdcard(function(){e.drugAdrugListAudit(function(){e.panduan(function(){e.after_vaild()})})})}this.drugAdrugListAudit(function(){e.panduan(function(){e.after_vaild()})})},t.prototype.drugAdrug=function(e){var t=e.map(function(e){return e.drugName}).join(" "),i=[];return this.wei19list.forEach(function(e){-1!==t.indexOf(e.guest)&&-1!==t.indexOf(e.honour)&&i.push(e)}),this.fan18list.forEach(function(e){-1!==t.indexOf(e.guest)&&e.honourList.forEach(function(a){-1!==t.indexOf(a.honour)&&i.push({guest:e.guest,honour:a.honour})})}),i},t.prototype.drugListAudit=function(){var e=this;this.drugAdrugModel=!1,this.panduan(function(){e.after_vaild()})},t.prototype.drugAdrugListAudit=function(e){this.drugAdrugList=[];var t=this.drugAdrug(this.CHINESE_preDrugList),i=this.drugAdrug(this.PASTE_preDrugList);if(t.length>0||i.length>0)return this.drugAdrugList=t.concat(i),void(this.drugAdrugModel=!0);e()},t.prototype.panduan=function(e){var t=0,i=[];if(this.PreDrugType=[],this.CHINESE_preDrugList.length>0){if(!(parseInt(this.allDosage)>=1))return void this.$alert("剂≥1");if(""==(this.everydayDosage||"")||""==(this.everytimeDosage||""))return void this.$message.error("请填写完整用法用量");t++,i.push("CHINESE_MEDICINE")}if(this.WESTERN_preDrugList.length>0&&(t++,i.push("WESTERN_MEDICINE")),this.PASTE_preDrugList.length>0){if(""==(this.everydayTime||"")||""==(this.everytimes||"")||""==(this.howManyDay||""))return void this.$message.error("请填写完整用法用量");t++,i.push("PASTE_PRESCRIPTION")}this.INSTRUMENTS_preDrugList.length>0&&(t++,i.push("INSTRUMENTS")),0!=t?(this.PreDrugType=i,t>1?this.dialogFormVisible=!0:e()):this.$alert("至少添加一条药品信息")},t.prototype.vaild_memberIdcard=function(e){var t=this;o.s({idcard:this.createForm.memberIdcard}).then(function(i){return i.retCode?void e():void(i.islogin||t.$message(i.message))})},t.prototype.submitcheckList=function(){var e=this,t=[];this.checkList.forEach(function(i){t=t.concat(e.preDrugList.filter(function(e){return i===e.preDrugType}))});var i=t.map(function(e){return e.prescriptionDrugId});this.after_vaild(i)},t.prototype.after_vaild=function(e){var t=this;if(void 0===e&&(e=null),"BACK_HANDWORK"==this.pres_type||"DOC_HANDWORK"==this.pres_type){if(!(this.$refs.cropper.preImageList.length>0))return void this.$message("请上传处方图片");this.createForm.pictureIds=this.$refs.cropper.preImageList.map(function(e){return e.presImageUrl}).join(",")}""!=(this.diagnosis||"")?this.$confirm("药品填写完成?现在开始转方?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.backLoad=!0,t.dialogFormVisible=!1;var i=t.preDrugList.map(function(e,t){return e.prescriptionDrugId});e&&(i=e),o.O({temporaryPrescriptiondrugId:i.join(","),prescriptionId:t.presId,tranRemake:t.tranRemake,changeName:sessionStorage.name,changeId:sessionStorage.merchantUserId,diagnosis:t.diagnosis,isReplaceDecocting:t.isReplaceDecocting,allDosage:t.allDosage,everydayDosage:t.everydayDosage,everytimeDosage:t.everytimeDosage,everydayTimes:t.everydayTime,everytimesG:t.everytimes,howManyDay:t.howManyDay,serviceMoney:t.serviceMoney,PreDrugType:t.PreDrugType.join(","),sugarType:t.sugarType.filter(function(e){return e}).join(","),aspartame:t.aspartame.filter(function(e){return e}).join(","),otherAccessories:t.otherAccessories.filter(function(e){return e}).join(","),replaceDecoctingMoney:t.replaceDecoctingMoney}).then(function(e){t.backLoad=!1,e.retCode?(t.createForm.presId=e.data.prescription.presId,t.sugarType=[],t.aspartame=[],t.otherAccessories=[],"BACK_HANDWORK"==t.pres_type||"DOC_HANDWORK"==t.pres_type?t.doUpdatePre(e.data.nextPresId,"转方成功"):(t.tranRemake="",""!==(e.data.nextPresId||"")?t.getCountForList("xia",e.data.nextPresId):t.$router.push("/transmit"))):(e.islogin||t.$alert(e.message),console.error("数据查询错误"))})}).catch(function(){t.$message({type:"info",message:"已取消操作"})}):this.$alert("请填写诊断")},t.prototype.getPrePic=function(){var e=this;o._16({preId:this.presId}).then(function(t){t.retCode?(e.preImageList=t.data,t.data.length>0&&e.$refs.cropper.changePreImageUrl(0)):(t.islogin||e.$alert(t.message),console.error("数据查询错误"))})},t.prototype.queryPresDetatil=function(){var e=this;o._38({preId:this.presId}).then(function(t){t.retCode?(e.prodetail=t.data.prescription,e.pres_type=e.prodetail.prescriptionType,"DOC_HANDWORK"!==e.prodetail.prescriptionType&&"BACK_HANDWORK"!=e.prodetail.prescriptionType||(e.createForm.memberId=e.prodetail.memberId?e.prodetail.memberId:"",e.createForm.memberid=e.prodetail.memberId?e.prodetail.memberId:"",e.createForm.memberName=e.prodetail.memberName?e.prodetail.memberName:"",e.createForm.memberPhone=e.prodetail.memberPhone?e.prodetail.memberPhone:"",e.createForm.patientSex=e.prodetail.patientSex?e.prodetail.patientSex:"",e.createForm.memberIdcard=e.prodetail.memberIdcard?e.prodetail.memberIdcard:"",e.createForm.memberAge=e.prodetail.memberAge?e.prodetail.memberAge:"",e.createForm.consigneeName=e.prodetail.consigneeName,e.createForm.consigneePhone=e.prodetail.consigneePhone,e.createForm.docterId=e.prodetail.docterId,e.createForm.docterName=e.prodetail.docterName,e.createForm.docterName=e.prodetail.docterName,e.serviceMoney=e.prodetail.serviceMoney,e.createForm.doctorMobile=e.prodetail.doctorMobile,e.createForm.hospitalName=e.prodetail.hospitalName,e.createForm.docterDept=e.prodetail.docterDept,e.createForm.diagnose=e.prodetail.diagnose,e.createForm.patientRemake=e.prodetail.patientRemake,""!==(e.prodetail.payStatus||"")&&("PAY_ON_DELIVERY"===e.prodetail.payStatus?e.payModeEnum="ORDER_PAY_ONDEV":e.payModeEnum=e.prodetail.payStatus),""!==(e.prodetail.provinceid||"")&&(e.createForm.provinceid=e.prodetail.provinceid,e.queryCityList()),""!==(e.prodetail.cityid||"")&&(e.createForm.cityid=e.prodetail.cityid,e.queryCountryList()),e.createForm.areaid=e.prodetail.areaid?e.prodetail.areaid:"",e.createForm.consigneeAddress=e.prodetail.consigneeAddress?e.prodetail.consigneeAddress:""),t.data.prescription&&(e.diagnosis=t.data.prescription.diagnose,t.data.prescription.allDosage&&(e.allDosage=t.data.prescription.allDosage),e.everydayDosage=t.data.prescription.everydayDosage,e.everytimeDosage=t.data.prescription.everytimeDosage,e.everydayTime=t.data.prescription.everydayTimes,e.everytimes=t.data.prescription.everytimesG,e.howManyDay=t.data.prescription.howManyDay,e.otherAccessories=[],t.data.prescription.sugarType.split(",").forEach(function(t){e.sugarTypeList.forEach(function(i,a){t==i&&(e.sugarType[a]=i)})}),t.data.prescription.otherAccessories.split(",").forEach(function(t){e.otherAccessoriesList.forEach(function(i,a){t==i&&(e.otherAccessories[a]=i)})}),t.data.prescription.aspartame.split(",").forEach(function(t){e.aspartameList.forEach(function(i,a){t==i&&(e.aspartame[a]=i)})}))):t.islogin||e.$alert(t.message)})},t.prototype.remoteMethod=function(e){var t=this;void 0!=e&&null!=e&&(""!==e?(this.loading=!0,setTimeout(function(){t.loading=!1,t.getDrugList(e)},200)):this.options4=[])},t.prototype.getDrugList=function(e){var t=this,i=this.drugType;"PASTE_PRESCRIPTION"==this.drugType&&(i="CHINESE"),o._8({keyFName:e,preId:this.presId,drugType:i}).then(function(e){e.retCode?t.options4=e.data.list:(e.islogin||t.$alert(e.message),console.error("数据查询错误"))})},t.prototype.getCountForList=function(e,t){var i=this;if(this.backLoad=!0,!sessionStorage.tranObject||0==sessionStorage.tranObject.length)return this.backLoad=!1,this.leftDis=!0,this.rightDis=!0,void this.$message("请到转方客服页面刷新后再操作");var a=JSON.parse(sessionStorage.tranObject);Object.assign(a,{presId:sessionStorage.presId}),o.R(a).then(function(a){if(a.retCode){if(i.presId="",t)return sessionStorage.presId=t,void i.init();i.leftDis=!a.data.Frist,i.rightDis=!a.data.Third,"shang"==e&&a.data.Frist&&(sessionStorage.presId=a.data.Frist.presId,i.rightDis=!1),"xia"==e&&a.data.Third&&(sessionStorage.presId=a.data.Third.presId,i.leftDis=!1),i.init()}else a.islogin||i.$alert(a.message),console.error("数据查询错误"),i.backLoad=!1})},t.prototype.doUpdatePre=function(e,t){var i=this;this.createForm.feeHide=this.createForm.feeTypeEnum,this.createForm.payModeEnum=this.payModeEnum,"BACK_HANDWORK"===this.pres_type&&(this.createForm.prescriptionType="BACK_HANDWORK"),o._53(this.createForm).then(function(a){a.retCode?(i.$message(t),i.tranRemake="",""!==(e||"")?i.getCountForList("xia",e):i.$router.push("/transmit")):(a.islogin||i.$alert(a.message),console.error("数据查询错误"))})},t.prototype.changefilter_box=function(e){this.filter_type=e,this.filter_model=!this.filter_model,this.resultList=[],this.mobile=""},t.prototype.select_item=function(e){e.doctorId&&(this.createForm.doctorid=e.doctorId,this.createForm.docterId=e.doctorId,this.createForm.docterName=e.name,this.createForm.doctorMobile=e.phone,this.createForm.hospitalName=e.hospitalName,this.createForm.docterDept=e.hospitalDepartment),e.memberId&&(this.createForm.memberId=e.memberId,this.createForm.memberid=e.memberId,this.createForm.memberName=e.name,this.createForm.memberPhone=e.phone,this.createForm.patientSex=e.sex,this.createForm.memberIdcard=e.idCard,this.createForm.memberAge=e.age),this.filter_model=!1},t.prototype.filtering=function(){var e=this;if(this.mobile){this.noMessage_model=!1,this.noMessage_loading=!0;var t=function(){e.noMessage_loading=!1},i=function(){0===e.resultList.length&&(e.noMessage_model=!0)};"doctor"===this.filter_type&&d.o(0,100,this.mobile,"").then(function(a){t(),a.retCode?(e.resultList=a.data.list,i()):a.islogin||e.$alert(a.message)}),"menber"===this.filter_type&&o.S({keyname:this.mobile,page:0,pageSize:100}).then(function(a){t(),a.retCode?(e.resultList=a.data.list,i()):a.islogin||e.$alert(a.message)})}},t.prototype.init=function(){this.backLoad=!0,""===(this.presId||"")&&(this.presId=sessionStorage.presId),this.allPrescription(),this.countPreByStatu(),""!==(this.presId||"")&&(this.queryPresDrug(),this.queryPresDetatil(),this.getPrePic()),this.backLoad=!1,this.drug={},this.instructions=""},t.prototype.beforeUpload=function(e){this.add_upload_loading=!0;var t=e.size/1024/1024<5;return t||this.$message.error("上传图片大小不能超过 5MB!"),t},t.prototype.queryCountryList=function(){var e=this;delete this.createForm.areaid,p.f(this.createForm.cityid).then(function(t){e.countryList=t.data.region})},t.prototype.queryCityList=function(){var e=this;delete this.createForm.cityid,delete this.createForm.areaid,p.e(this.createForm.provinceid).then(function(t){e.cityList=t.data.region})},t.prototype.queryProvinceList=function(){var e=this;p.g().then(function(t){e.provinceList=t.data.region})},t.prototype.sugarTypechange=function(e,t,i){"sugarType"==i&&(this.sugarType[t]==e?this.sugarType[t]=null:this.sugarType[t]=e,this.sugarType.push()),"aspartame"===i&&(this.aspartame[t]==e?this.aspartame[t]=null:this.aspartame[t]=e,this.aspartame.push()),"otherAccessories"===i&&(this.otherAccessories[t]==e?this.otherAccessories[t]=null:this.otherAccessories[t]=e,this.otherAccessories.push())},Object.defineProperty(t.prototype,"CHINESE_preDrugListtotal",{get:function(){var e=this.CHINESE_preDrugList.map(function(e){return e.shouldpay});return e.length>0&&this.allDosage?e.reduce(function(e,t){return e+t})*parseFloat(this.allDosage):0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"WESTERN_preDrugListtotal",{get:function(){var e=this.WESTERN_preDrugList.map(function(e){return e.shouldpay});return e.length>0?e.reduce(function(e,t){return e+t}):0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"PASTE_preDrugListtotal",{get:function(){var e=this.PASTE_preDrugList.map(function(e){return e.shouldpay});return e.length>0?e.reduce(function(e,t){return e+t}):0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"INSTRUMENTS_preDrugListtotal",{get:function(){var e=this.INSTRUMENTS_preDrugList.map(function(e){return e.shouldpay});return e.length>0?e.reduce(function(e,t){return e+t}):0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"makeMoney",{get:function(){if(0==this.PASTE_preDrugList.length)return 0;var e=this.PASTE_preDrugList.map(function(e){return e.unitG*parseFloat(e.quantity)}).reduce(function(e,t){return e+t});return e>5e3?80*(e-5e3)/1e3+410:410},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"replaceDecoctingMoney",{get:function(){var e=parseFloat(this.allDosage)*this.replaceDecoctingMoneyOne;return e>0&&1==this.isReplaceDecocting?e.toFixed(2):0},enumerable:!0,configurable:!0}),t.prototype.handleLabel=function(e){return e.filter(function(e){return e}).join("/")},t.prototype.mounted=function(){this.fileUploadUrl=c.d,""!=(this.$route.params.pres_type||"")||""!==(sessionStorage.presId||"")?(this.queryProvinceList(),this.pres_type=this.$route.params.pres_type,this.init()):this.$router.replace("/transmit")},t=a.a([l()({props:{},components:{corpperlabel:n.a}})],t)}(r.default)),g={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{directives:[{name:"bouncing",rawName:"v-bouncing",value:e.backLoad,expression:"backLoad"}]},[a("div",{staticStyle:{display:"flex","align-items":"center",padding:"20px 0"}},[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",{staticStyle:{"font-weight":"600","font-size":"20px",color:"#2c3e50"},attrs:{to:{path:"/transmit"}}},[a("span",{staticClass:"fllll",staticStyle:{cursor:"pointer"}},[e._v("转方管理")])]),e._v(" "),a("el-breadcrumb-item",{staticStyle:{"font-size":"16px","line-height":"20px",color:"#2c3e50"}},[a("span",{staticClass:"fllll"},[e._v("转方工作台")])])],1)],1),e._v(" "),a("div",[a("span",{staticStyle:{"margin-right":"10px"}},[e._v("平台处方数量统计 "+e._s(e.allprescription)+" 个")]),e._v(" "),a("span",[e._v(" 待转方数量 "+e._s(e.notCount)+" 个")])]),e._v(" "),a("div",{staticStyle:{"text-align":"right",float:"right"}},[a("el-button",{attrs:{size:"small",type:"primary",disabled:e.leftDis,icon:"el-icon-arrow-left"},on:{click:function(t){e.getCountForList("shang")}}},[e._v("上一条")]),e._v(" "),a("el-button",{attrs:{size:"small",type:"primary",disabled:e.rightDis},on:{click:function(t){e.getCountForList("xia")}}},[e._v("下一条"),a("i",{staticClass:"el-icon-arrow-right"})])],1),e._v(" "),a("div",{staticClass:"flex flex-warp-justify",staticStyle:{"margin-top":"10px","line-height":"28px"}},[""!==(e.presId||"")?a("h4",{staticStyle:{margin:"0"}},[e._v("处方状态：")]):e._e(),e._v(" "),""!==(e.presId||"")?a("div",[e._v("\n    "+e._s(e.handleStatus(e.prodetail.presState))+"\n")]):e._e(),e._v(" "),a("h4",{staticStyle:{margin:"0"},style:""!==(e.presId||"")?"padding-left:10px;":""},[e._v("订单类型：")]),e._v(" "),a("div",[""!==(e.presId||"")?a("span",[e._v("  "+e._s(e.handleprescriptionType(e.prodetail.prescriptionType)))]):a("span",[e._v(" 线下订单")])]),e._v(" "),"BACK_HANDWORK"===e.pres_type||"DOC_HANDWORK"===e.pres_type?a("div",{staticClass:"flex flex-warp-justify"},[a("h4",{staticStyle:{margin:"0","padding-left":"10px"}},[e._v("支付状态：")]),e._v(" "),a("div",[a("el-select",{attrs:{size:"mini",placeholder:"请选择"},model:{value:e.payModeEnum,callback:function(t){e.payModeEnum=t},expression:"payModeEnum"}},[a("el-option",{attrs:{label:"未支付",value:"PAY_WAIT"}}),e._v(" "),a("el-option",{attrs:{label:"已支付",value:"PAY_SUCCESS"}}),e._v(" "),a("el-option",{attrs:{label:"货到付款",value:"ORDER_PAY_ONDEV"}})],1)],1)]):e._e()]),e._v(" "),a("div",{staticStyle:{"font-size":"14.8px",display:"flex","flex-wrap":"wrap"}},[e.prodetail.createDate?a("div",{staticClass:" flex  flex-align-center",staticStyle:{"margin-top":"10px","margin-bottom":"10px","margin-right":"10px"}},[e._v("\n    开方时间："+e._s(e.prodetail.createDate)+"\n    ")]):e._e(),e._v(" "),a("div",{staticClass:" flex  flex-align-center",staticStyle:{"margin-top":"10px","margin-bottom":"10px","margin-right":"10px"}},[a("div",{staticStyle:{width:"130px","white-space":"nowrap"}},[e._v("医生给患者备注：")]),e._v(" "),"BACK_HANDWORK"!==e.pres_type?a("span",[e._v(e._s(e.prodetail.patientRemake))]):a("el-input",{staticStyle:{"margin-right":"10px"},attrs:{size:"small",placeholder:"医生给患者备注"},model:{value:e.createForm.patientRemake,callback:function(t){e.$set(e.createForm,"patientRemake",t)},expression:"createForm.patientRemake"}})],1),e._v(" "),"BACK_HANDWORK"!==e.pres_type||"NOT_TRANSLATED_PRESCRIPTION"===e.prodetail.presState?a("div",{staticClass:" flex  flex-align-center",staticStyle:{"margin-top":"10px","margin-bottom":"10px","margin-right":"10px"}},[e._v("\n    医生给转方备注："+e._s(e.prodetail.remark)+"\n    ")]):e._e()]),e._v(" "),"BACK_HANDWORK"!==e.pres_type?a("div",{staticStyle:{"font-size":"14.8px",display:"flex","flex-wrap":"wrap"}},["NOT_TRANSLATED_PRESCRIPTION"!=e.prodetail.presState?a("div",{staticStyle:{"margin-top":"10px","margin-bottom":"10px","margin-right":"10px"}},[e._v("\n    转方时间："+e._s(e.prodetail.transDate)+"\n    ")]):e._e(),e._v(" "),"NOT_TRANSLATED_PRESCRIPTION"!=e.prodetail.presState?a("div",{staticStyle:{"margin-top":"10px","margin-bottom":"10px","margin-right":"10px"}},[e._v("\n    转方医生："+e._s(e.prodetail.transDocName)+"\n    ")]):e._e(),e._v(" "),"NOT_TRANSLATED_PRESCRIPTION"!=e.prodetail.presState?a("div",{staticStyle:{"margin-top":"10px","margin-bottom":"10px","margin-right":"10px"}},[e._v("\n    转方备注："+e._s(e.prodetail.transRemark)+"\n    ")]):e._e()]):e._e(),e._v(" "),a("div",{staticStyle:{"font-size":"14.8px",display:"flex","flex-wrap":"wrap"}},["REJECT_TRANSLATED_PRESCRIPTION"==e.prodetail.presState?a("div",{staticStyle:{"margin-top":"10px","margin-bottom":"10px","margin-right":"10px"}},[e._v("\n    转方退回时间："+e._s(e.prodetail.rejectTransTime)+"\n    ")]):e._e(),e._v(" "),"REJECT_TRANSLATED_PRESCRIPTION"==e.prodetail.presState?a("div",{staticStyle:{"margin-top":"10px","margin-bottom":"10px","margin-right":"10px"}},[e._v("\n    转方退回医生："+e._s(e.prodetail.rejectTranName)+"\n    ")]):e._e(),e._v(" "),"REJECT_TRANSLATED_PRESCRIPTION"==e.prodetail.presState?a("div",{staticStyle:{"margin-top":"10px","margin-bottom":"10px","margin-right":"10px"}},[e._v("\n    转方退回原因："+e._s(e.prodetail.returnReason)+"\n    ")]):e._e()]),e._v(" "),"BACK_HANDWORK"!==e.pres_type&&"DOC_HANDWORK"!==e.pres_type?a("div",{staticStyle:{"font-size":"14.8px",display:"flex","flex-wrap":"wrap"}},["NOT_TRANSLATED_PRESCRIPTION"!=e.prodetail.presState&&"REJECT_AUDIT_PRESCRIPTION"!=e.prodetail.presState&&"REJECT_TRANSLATED_PRESCRIPTION"!=e.prodetail.presState&&"ALREADY_TRANSLATED_PRESCRIPTION"!=e.prodetail.presState?a("div",{staticStyle:{"margin-top":"10px","margin-bottom":"10px","margin-right":"10px"}},[e._v("\n    审方时间："+e._s(e.prodetail.auditingDate)+"\n    ")]):e._e(),e._v(" "),"NOT_TRANSLATED_PRESCRIPTION"!=e.prodetail.presState&&"REJECT_AUDIT_PRESCRIPTION"!=e.prodetail.presState&&"ALREADY_TRANSLATED_PRESCRIPTION"!=e.prodetail.presState?a("div",{staticStyle:{"margin-top":"10px","margin-bottom":"10px","margin-right":"10px"}},[e._v("\n    审方医生："+e._s(e.prodetail.transDocName)+"\n    ")]):e._e()]):e._e(),e._v(" "),a("div",{staticStyle:{"font-size":"14.8px",display:"flex","flex-wrap":"wrap"}},["REJECT_AUDIT_PRESCRIPTION"==e.prodetail.presState||e.prodetail.rejectAuditTime?a("div",{staticStyle:{"margin-top":"10px","margin-bottom":"10px","margin-right":"10px"}},[e._v("\n    审方退回时间："+e._s(e.prodetail.rejectAuditTime)+"\n    ")]):e._e(),e._v(" "),"REJECT_AUDIT_PRESCRIPTION"==e.prodetail.presState||e.prodetail.rejectAuditTime?a("div",{staticStyle:{"margin-top":"10px","margin-bottom":"10px","margin-right":"10px"}},[e._v("\n    审方退回医生："+e._s(e.prodetail.rejectAuditName)+"\n    ")]):e._e(),e._v(" "),"REJECT_AUDIT_PRESCRIPTION"==e.prodetail.presState||e.prodetail.rejectAuditTime?a("div",{staticStyle:{"margin-top":"10px","margin-bottom":"10px","margin-right":"10px"}},[e._v("\n    审方退回原因："+e._s(e.prodetail.rejectAuditReason)+"\n    ")]):e._e()]),e._v(" "),"BACK_HANDWORK"!==e.pres_type&&"DOC_HANDWORK"!==e.pres_type?a("div",e._l(e.prodeInfo,function(t,i){return 1!==i?a("div",[a("h4",{staticStyle:{margin:"10px 0"}},[e._v(e._s(t.title+"信息"))]),e._v(" "),a("div",{staticStyle:{display:"flex","flex-wrap":"wrap","margin-bottom":"10px",height:"12px"}},e._l(t.list,function(t){return a("div",{staticClass:" flex  flex-align-center",staticStyle:{"margin-right":"10px","line-height":"12px"}},[a("span",[e._v(e._s(t.title))]),e._v(" "),"diagnose"!==t.value?a("span",[e._v(e._s(e.prodetail[t.value]))]):a("span",[a("el-input",{attrs:{placeholder:"诊断"},model:{value:e.diagnosis,callback:function(t){e.diagnosis=t},expression:"diagnosis"}})],1)])}))]):e._e()})):a("div",[a("el-collapse",{staticClass:"diy_collapse",staticStyle:{"margin-top":"20px"},model:{value:e.activeNames,callback:function(t){e.activeNames=t},expression:"activeNames"}},e._l(e.prodeInfo,function(t,i){return a("el-collapse-item",{attrs:{title:t.title+"信息",name:i}},[a("div",{staticStyle:{"margin-left":"20px"}},[(0==i&&"DOC_HANDWORK"===e.pres_type||"DOC_HANDWORK"!==e.pres_type)&&1!==i?a("div",{staticClass:"flex  flex-align-center opactiy",staticStyle:{cursor:"pointer"},on:{click:function(t){e.changefilter_box(0==i?"menber":"doctor")}}},[a("i",{staticClass:"iconfont icon-sousuo1"}),e._v(" "),a("div",[e._v("搜"+e._s(t.title))])]):e._e(),e._v(" "),1===i?a("div",[a("div",{staticStyle:{display:"flex","flex-wrap":"wrap","margin-bottom":"10px"}},[a("div",{staticClass:" flex  flex-align-center",staticStyle:{"margin-right":"10px","margin-top":"10px","line-height":"12px"}},[a("span",{staticStyle:{width:"130px","white-space":"nowrap"}},[e._v("收件人：")]),e._v(" "),a("el-input",{staticStyle:{"margin-right":"10px"},attrs:{size:"small",placeholder:"请输入收件人"},model:{value:e.createForm.consigneeName,callback:function(t){e.$set(e.createForm,"consigneeName",t)},expression:"createForm.consigneeName"}})],1),e._v(" "),a("div",{staticClass:" flex  flex-align-center",staticStyle:{"margin-right":"10px","margin-top":"10px","line-height":"12px"}},[a("span",{staticStyle:{width:"130px","white-space":"nowrap"}},[e._v("收件号码：")]),e._v(" "),a("el-input",{staticStyle:{"margin-right":"10px"},attrs:{size:"small",placeholder:"请输入收件号码"},model:{value:e.createForm.consigneePhone,callback:function(t){e.$set(e.createForm,"consigneePhone",t)},expression:"createForm.consigneePhone"}})],1)]),e._v(" "),a("div",{staticStyle:{display:"flex","flex-wrap":"wrap","margin-bottom":"10px"}},[a("div",{staticClass:" flex  flex-align-center",staticStyle:{"margin-right":"10px","margin-top":"10px","line-height":"12px"}},[a("span",{staticStyle:{width:"130px","white-space":"nowrap"}},[e._v("收货地区：")]),e._v(" "),a("div",{staticClass:"el-input el-input--small",staticStyle:{"margin-left":"10px"}},[a("el-select",{attrs:{size:"small"},on:{change:function(t){e.queryCityList()}},model:{value:e.createForm.provinceid,callback:function(t){e.$set(e.createForm,"provinceid",t)},expression:"createForm.provinceid"}},e._l(e.provinceList,function(e,t){return a("el-option",{key:t,attrs:{label:e.name,value:e.id}})}))],1),e._v(" "),a("div",{staticClass:"el-input el-input--small",staticStyle:{"margin-left":"10px"}},[a("el-select",{attrs:{size:"small"},on:{change:function(t){e.queryCountryList()}},model:{value:e.createForm.cityid,callback:function(t){e.$set(e.createForm,"cityid",t)},expression:"createForm.cityid"}},e._l(e.cityList,function(e,t){return a("el-option",{key:t,attrs:{label:e.name,value:e.id}})}))],1),e._v(" "),a("div",{staticClass:"el-input el-input--small",staticStyle:{"margin-left":"10px"}},[a("el-select",{attrs:{size:"small"},model:{value:e.createForm.areaid,callback:function(t){e.$set(e.createForm,"areaid",t)},expression:"createForm.areaid"}},e._l(e.countryList,function(e,t){return a("el-option",{key:t,attrs:{label:e.name,value:e.id}})}))],1)])]),e._v(" "),a("div",{staticClass:" flex  flex-align-center",staticStyle:{"margin-right":"10px","margin-top":"10px","line-height":"12px"}},[a("div",{staticClass:" flex  flex-align-center",staticStyle:{"margin-right":"10px","margin-top":"10px","line-height":"12px"}},[a("span",{staticStyle:{width:"130px","white-space":"nowrap"}},[e._v("收件地址：")]),e._v(" "),a("el-input",{staticStyle:{"margin-right":"10px"},attrs:{size:"small",placeholder:"请输入收件地址"},model:{value:e.createForm.consigneeAddress,callback:function(t){e.$set(e.createForm,"consigneeAddress",t)},expression:"createForm.consigneeAddress"}})],1)])]):e._e(),e._v(" "),a("div",{staticStyle:{display:"flex","flex-wrap":"wrap","margin-bottom":"10px"}},e._l(t.list,function(t){return"consigneeAddress"!==t.value?a("div",{staticClass:" flex  flex-align-center",staticStyle:{"margin-right":"10px","margin-top":"10px","line-height":"12px"}},[a("span",{class:"memberName"===t.value||"memberPhone"===t.value||"diagnose"==t.model?"vaild_icon":"",staticStyle:{width:"130px","white-space":"nowrap"}},[e._v(e._s(t.title))]),e._v(" "),"diagnose"!==t.model?a("el-input",{staticStyle:{"margin-right":"10px"},attrs:{disabled:2==i,size:"small",placeholder:"请输入"+t.title.replace("：","")},model:{value:e.createForm[t.model],callback:function(i){e.$set(e.createForm,t.model,i)},expression:"createForm[items.model]"}}):a("el-input",{staticStyle:{"margin-right":"10px"},attrs:{size:"small",placeholder:"请输入"+t.title.replace("：","")},model:{value:e.diagnosis,callback:function(t){e.diagnosis=t},expression:"diagnosis"}})],1):e._e()}))])])}))],1),e._v(" "),a("div",{staticStyle:{height:"20px"}}),e._v(" "),a("el-row",{staticStyle:{padding:"0 0 20px"},attrs:{gutter:24}},[a("el-col",{attrs:{xs:24,sm:24,md:12,lg:11,xl:12}},[a("div",{staticStyle:{position:"relative"}},[a("corpperlabel",{ref:"cropper",staticStyle:{"margin-top":"40px"},attrs:{preImageList:e.preImageList,haveDetele:!0}})],1)]),e._v(" "),a("el-col",{attrs:{xs:24,sm:24,md:12,lg:13,xl:12}},[a("el-tabs",{on:{"tab-click":e.handleClick},model:{value:e.drugType,callback:function(t){e.drugType=t},expression:"drugType"}},[a("el-tab-pane",{attrs:{label:"西药",name:"WESTERN"}},[a("div",{staticClass:"item_box_wp"},[a("div",{staticClass:"voice_2"},[a("ul",e._l(2,function(t,r){return a("li",{class:["li"+(r+1),r==e.selectlabel?"bigwidth":"smallwidth"],on:{click:function(t){e.selectlabel=r}}},[r!==e.selectlabel?a("div",{staticClass:"fold"},[a("span",{staticClass:"img"},[a("img",0==r?{staticStyle:{width:"100%"},attrs:{src:i("GpMq")}}:{staticStyle:{width:"100%"},attrs:{src:i("QXmb")}})])]):e._e(),e._v(" "),r===e.selectlabel?a("div",{staticClass:"unfold"},[a("dl",[0==r?a("div",{staticStyle:{width:"100%","padding-top":"30px"}},[a("el-form",{attrs:{"label-width":"120px",size:"mini"}},[a("el-form-item",{attrs:{label:"药品："}},[a("el-select",{staticStyle:{width:"85%"},attrs:{filterable:"",clearable:"",remote:"",placeholder:"请输入药品","remote-method":e.remoteMethod,loading:e.loading},on:{change:e.selectDrug},model:{value:e.drug.drugId,callback:function(t){e.$set(e.drug,"drugId",t)},expression:"drug.drugId"}},e._l(e.options4,function(t){return a("el-option",{key:t.drugId,attrs:{label:e.handleLabel([t.commonName,t.productName,t.specification,t.manufacturer]),value:t.drugId}})}))],1),e._v(" "),a("el-form-item",{attrs:{label:"供应商："}},[a("el-select",{staticStyle:{width:"85%"},attrs:{clearable:"",placeholder:"请选择供应商",loading:e.loading},model:{value:e.drug.partnerObj,callback:function(t){e.$set(e.drug,"partnerObj",t)},expression:"drug.partnerObj"}},e._l(e.partnerNameList,function(e){return a("el-option",{key:e.partnerId,attrs:{label:e.partnerName,value:e.partnerId}})}))],1),e._v(" "),a("el-form-item",{attrs:{label:"单位："}},[a("el-select",{staticStyle:{width:"85%"},attrs:{placeholder:"请输入单位",loading:e.loading},model:{value:e.drug.packing_unit,callback:function(t){e.$set(e.drug,"packing_unit",t)},expression:"drug.packing_unit"}},e._l(e.packingUnitList,function(e){return a("el-option",{key:e,attrs:{label:e,value:e}})}))],1),e._v(" "),a("el-form-item",{attrs:{label:"剂型："}},[a("el-select",{staticStyle:{width:"85%"},attrs:{placeholder:"请输入剂型",loading:e.loading},model:{value:e.drug.dosageforms,callback:function(t){e.$set(e.drug,"dosageforms",t)},expression:"drug.dosageforms"}},e._l(e.dosageformsList,function(e){return a("el-option",{key:e,attrs:{label:e,value:e}})}))],1),e._v(" "),a("el-form-item",{attrs:{label:"用法："}},[a("el-autocomplete",{staticClass:"inline-input",staticStyle:{width:"85%"},attrs:{"fetch-suggestions":e.querySearch1,placeholder:"请输入用法"},model:{value:e.drug.usages,callback:function(t){e.$set(e.drug,"usages",t)},expression:"drug.usages"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"单次用量："}},[a("el-autocomplete",{staticClass:"inline-input",staticStyle:{width:"85%"},attrs:{"fetch-suggestions":e.querySearch2,placeholder:"请输入单次用量"},model:{value:e.drug.dosage,callback:function(t){e.$set(e.drug,"dosage",t)},expression:"drug.dosage"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"频次："}},[a("el-autocomplete",{staticClass:"inline-input",staticStyle:{width:"85%"},attrs:{"fetch-suggestions":e.querySearch3,placeholder:"请输入频次",clearable:""},model:{value:e.drug.frequency,callback:function(t){e.$set(e.drug,"frequency",t)},expression:"drug.frequency"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"数量："}},[a("el-input",{staticStyle:{width:"85%"},attrs:{placeholder:"请输入数量"},model:{value:e.drug.quantity,callback:function(t){e.$set(e.drug,"quantity",t)},expression:"drug.quantity"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"价格类型："}},[a("el-select",{staticStyle:{width:"85%"},attrs:{placeholder:"请选择售价",loading:e.loading},on:{change:function(t){e.chengedrugremarks()}},model:{value:e.drug.drugremarkspriceId,callback:function(t){e.$set(e.drug,"drugremarkspriceId",t)},expression:"drug.drugremarkspriceId"}},e._l(e.DrugPriceList,function(e){return a("el-option",{key:e,attrs:{label:e.remarks+"￥"+e.sellingPrice,value:e.priceId}})}))],1),e._v(" "),a("el-form-item",{attrs:{label:"药品价格："}},[a("el-input",{staticStyle:{width:"85%"},attrs:{placeholder:"请输入药品价格"},model:{value:e.drug.price,callback:function(t){e.$set(e.drug,"price",t)},expression:"drug.price"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"使用说明："}},[a("el-input",{staticStyle:{width:"85%"},attrs:{type:"textarea",rows:4,placeholder:"请输入使用说明"},model:{value:e.instructions,callback:function(t){e.instructions=t},expression:"instructions"}})],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{size:"mini",type:"primary",disabled:e.loading},on:{click:function(t){e.docreateDrug()}}},[e._v("提交")])],1)],1)],1):e._e(),e._v(" "),1==r?a("div",[a("div",{staticStyle:{padding:"10px"}},[a("div",[a("div",{staticClass:"flex flex-pack-justify flex-align-center",staticStyle:{height:"28px"}},[a("div",{staticStyle:{"font-size":"16px"}},[e._v("共"+e._s(e.WESTERN_preDrugList.length)+"条")]),e._v(" "),a("div",{staticStyle:{"padding-right":"20px",color:"red","font-size":"16px"}},[e._v("合计:￥"+e._s(e.WESTERN_preDrugListtotal.toFixed(2)))])])]),e._v(" "),e._l(e.WESTERN_preDrugList,function(t,i){return a("div",{staticClass:"flex  flex-align-center"},[a("div",[a("div",{staticStyle:{"text-align":"center","font-size":"15px","margin-right":"10px"}},[e._v("   "+e._s(i+1))]),e._v(" "),a("div",{staticClass:"shanchukuai flex  flex-align-center flex-pack-center",on:{click:function(a){e.deletePreDrug(i,t)}}},[a("i",{staticClass:"iconfont icon-iconfontshanchu3"})])]),e._v(" "),a("div",{staticClass:"flex-1",staticStyle:{border:"1px solid #c8c6c6","margin-bottom":"10px",padding:"5px"}},[a("div",{staticClass:"flex flex-pack-justify flex-align-center",staticStyle:{color:"#999"}},[a("div",[e._v(e._s(t.codeId)+" ")]),e._v(" "),a("div",[e._v(e._s(t.createDate)+" ")])]),e._v(" "),a("div",{staticClass:"flex flex-pack-justify flex-align-center"},[a("span",{staticStyle:{"font-size":"16px",color:"#000"}},[e._v(e._s(t.drugName)+"("+e._s(t.productName)+")")]),e._v(" "),a("span",{},[e._v("￥"+e._s(t.price)+" "),a("span",{staticStyle:{"font-size":"16px",color:"#000","font-weight":"800"}},[a("span",[e._v("×")]),e._v(e._s(t.quantity))])])]),e._v(" "),a("div",{staticClass:"flex flex-pack-justify flex-align-center"},[a("span",{staticStyle:{color:"#999","font-weight":"600"}},[e._v(e._s(t.specification))]),e._v(" "),a("span",{},[e._v(e._s(t.usages))]),e._v(" "),a("span",{},[e._v(e._s(t.dosage))]),e._v(" "),a("span",{},[e._v(e._s(t.frequency))]),e._v(" "),a("span",{staticStyle:{color:"red","font-size":"16px"}},[e._v("￥"+e._s(t.shouldpay))])]),e._v(" "),a("div",{staticClass:"flex flex-pack-justify flex-align-center"},[a("div",{staticClass:"flex-1"},[e._v(e._s(t.manufacturer))]),e._v(" "),a("div",{staticClass:"flex-1",staticStyle:{"text-align":"center"}},[e._v(e._s(t.partnerName))])]),e._v(" "),a("div",{staticClass:"flex flex-pack-justify flex-align-center"},[a("div",{staticClass:"flex-1"},[e._v("使用说明："+e._s(t.instructions))])])])])})],2)]):e._e()])]):e._e()])}))])])]),e._v(" "),a("el-tab-pane",{attrs:{label:"中药",name:"CHINESE"}},[a("div",{staticClass:"item_box_wp"},[a("div",{staticClass:"voice_2"},[a("ul",e._l(2,function(t,r){return a("li",{class:["li"+(r+1),r==e.selectlabel?"bigwidth":"smallwidth"],on:{click:function(t){e.selectlabel=r}}},[r!==e.selectlabel?a("div",{staticClass:"fold"},[a("span",{staticClass:"img"},[a("img",0==r?{staticStyle:{width:"100%"},attrs:{src:i("GpMq")}}:{staticStyle:{width:"100%"},attrs:{src:i("QXmb")}})])]):e._e(),e._v(" "),r===e.selectlabel?a("div",{staticClass:"unfold"},[a("dl",[0==r?a("div",{staticStyle:{width:"100%","padding-top":"30px"}},[a("el-form",{attrs:{"label-width":"120px",size:"mini"}},[a("el-form-item",{attrs:{label:"药材名称："}},[a("el-select",{staticStyle:{width:"85%"},attrs:{filterable:"",clearable:"",remote:"",placeholder:"请输入药品","remote-method":e.remoteMethod,loading:e.loading},on:{change:e.selectDrug},model:{value:e.drug.drugId,callback:function(t){e.$set(e.drug,"drugId",t)},expression:"drug.drugId"}},e._l(e.options4,function(t){return a("el-option",{key:t.drugId,attrs:{label:e.handleLabel([t.commonName,t.productName,t.producingArea,t.typeName]),value:t.drugId}})}))],1),e._v(" "),a("el-form-item",{attrs:{label:"供应商："}},[a("el-select",{staticStyle:{width:"85%"},attrs:{clearable:"",placeholder:"请选择供应商",loading:e.loading},model:{value:e.drug.partnerObj,callback:function(t){e.$set(e.drug,"partnerObj",t)},expression:"drug.partnerObj"}},e._l(e.partnerNameList,function(e){return a("el-option",{key:e.partnerId,attrs:{label:e.partnerName,value:e.partnerId}})}))],1),e._v(" "),a("el-form-item",{attrs:{label:"单位："}},[a("el-select",{staticStyle:{width:"85%"},attrs:{placeholder:"请输入单位",loading:e.loading},model:{value:e.drug.packing_unit,callback:function(t){e.$set(e.drug,"packing_unit",t)},expression:"drug.packing_unit"}},e._l(e.packingUnitList,function(e){return a("el-option",{key:e,attrs:{label:e,value:e}})}))],1),e._v(" "),a("el-form-item",{attrs:{label:"煎煮方式："}},[a("el-input",{staticStyle:{width:"85%"},attrs:{placeholder:"请输入煎煮方式"},model:{value:e.drug.decoctingType,callback:function(t){e.$set(e.drug,"decoctingType",t)},expression:"drug.decoctingType"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"类型："}},[a("el-select",{staticStyle:{width:"85%"},attrs:{placeholder:"请选择类型",loading:e.loading},model:{value:e.drug.chineseType,callback:function(t){e.$set(e.drug,"chineseType",t)},expression:"drug.chineseType"}},[a("el-option",{attrs:{label:"普通",value:"普通"}}),e._v(" "),a("el-option",{attrs:{label:"贵细",value:"贵细"}}),e._v(" "),a("el-option",{attrs:{label:"毒性",value:"毒性"}})],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"单价："}},[a("el-input",{staticStyle:{width:"85%"},attrs:{placeholder:"请输入单价"},model:{value:e.drug.price,callback:function(t){e.$set(e.drug,"price",t)},expression:"drug.price"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"数量："}},[a("el-input",{staticStyle:{width:"85%"},attrs:{placeholder:"请输入数量"},model:{value:e.drug.quantity,callback:function(t){e.$set(e.drug,"quantity",t)},expression:"drug.quantity"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"药品价格："}},[a("el-input",{staticStyle:{width:"85%"},attrs:{placeholder:"请输入药品价格"},model:{value:e.drug.price,callback:function(t){e.$set(e.drug,"price",t)},expression:"drug.price"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"使用说明："}},[a("el-input",{staticStyle:{width:"85%"},attrs:{type:"text",rows:4,placeholder:"请输入使用说明"},model:{value:e.instructions,callback:function(t){e.instructions=t},expression:"instructions"}})],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{size:"mini",type:"primary",disabled:e.loading},on:{click:function(t){e.docreateDrug()}}},[e._v("提交")])],1)],1)],1):e._e(),e._v(" "),1==r?a("div",[a("div",{staticStyle:{padding:"10px"}},[a("div",[a("div",{staticClass:"flex flex-pack-justify flex-align-center",staticStyle:{height:"28px"}},[a("div",{staticStyle:{"font-size":"16px"}},[e._v("共"+e._s(e.CHINESE_preDrugList.length)+"条")]),e._v(" "),a("div",{staticStyle:{"padding-right":"20px",color:"red","font-size":"16px"}},[e._v("合计:￥"+e._s(e.CHINESE_preDrugListtotal.toFixed(2)))])])]),e._v(" "),a("el-form",{attrs:{"label-width":"120px",inline:"true"}},[a("el-form-item",{staticStyle:{width:"100%"},attrs:{label:"是否代煎："}},[a("div",{staticClass:"flex flex-align-center "},[a("div",[a("el-radio",{attrs:{label:0},model:{value:e.isReplaceDecocting,callback:function(t){e.isReplaceDecocting=t},expression:"isReplaceDecocting"}},[e._v("不代煎")]),e._v(" "),a("el-radio",{attrs:{label:1},model:{value:e.isReplaceDecocting,callback:function(t){e.isReplaceDecocting=t},expression:"isReplaceDecocting"}},[e._v("代煎")])],1),e._v(" "),a("div",{staticClass:"flex flex-align-center flex-end-justify",staticStyle:{"text-align":"right","margin-left":"15px"}},[a("span",[a("el-input",{staticStyle:{"max-width":"100px"},attrs:{size:"mini",type:"text",placeholder:"输入代煎费"},model:{value:e.replaceDecoctingMoneyOne,callback:function(t){e.replaceDecoctingMoneyOne=t},expression:"replaceDecoctingMoneyOne"}})],1),e._v("/剂\n        "),a("span",{staticStyle:{color:"red"}},[e._v("￥\n          "+e._s(e.replaceDecoctingMoney)+"\n        ")])])])]),e._v(" "),a("el-form-item",{staticStyle:{"font-size":"14px"},attrs:{label:"用法用量："}},[a("div",{staticClass:"flex everyNum",staticStyle:{"font-size":"12px"}},[a("div",[e._v("共")]),e._v(" "),a("div",[a("el-input",{staticStyle:{"max-width":"50px"},attrs:{size:"mini",type:"text",placeholder:"输入数量"},model:{value:e.allDosage,callback:function(t){e.allDosage=t},expression:"allDosage"}})],1),e._v(" "),a("div",[e._v("剂，每日")]),e._v(" "),a("div",[a("el-input",{staticStyle:{"max-width":"50px"},attrs:{size:"mini",type:"text",placeholder:"输入数量"},model:{value:e.everydayDosage,callback:function(t){e.everydayDosage=t},expression:"everydayDosage"}})],1),e._v(" "),a("div",[e._v("剂，1剂分")]),e._v(" "),a("div",[a("el-input",{staticStyle:{"max-width":"50px"},attrs:{size:"mini",type:"text",placeholder:"输入数量"},model:{value:e.everytimeDosage,callback:function(t){e.everytimeDosage=t},expression:"everytimeDosage"}})],1),e._v(" "),a("div",[e._v("次服用")])])])],1),e._v(" "),e._l(e.CHINESE_preDrugList,function(t,i){return a("div",{staticClass:"flex  flex-align-center"},[a("div",[a("div",{staticStyle:{"text-align":"center","font-size":"15px","margin-right":"10px"}},[e._v("   "+e._s(i+1))]),e._v(" "),a("div",{staticClass:"shanchukuai flex  flex-align-center flex-pack-center",on:{click:function(a){e.deletePreDrug(i,t)}}},[a("i",{staticClass:"iconfont icon-iconfontshanchu3"})])]),e._v(" "),a("div",{staticClass:"flex-1",staticStyle:{border:"1px solid #c8c6c6","margin-bottom":"10px",padding:"5px"}},[a("div",{staticClass:"flex flex-pack-justify flex-align-center",staticStyle:{color:"#999"}},[a("div",[e._v(e._s(t.codeId)+" ")]),e._v(" "),a("div",[e._v(e._s(t.createDate)+" ")])]),e._v(" "),a("div",{staticClass:"flex flex-pack-justify flex-align-center"},[a("span",{staticStyle:{"font-size":"16px",color:"#000"}},[e._v(e._s(t.drugName)+"("+e._s(t.productName)+")")]),e._v(" "),a("span",{},[e._v("￥"+e._s(t.price)+" "),a("span",{staticStyle:{"font-size":"16px",color:"#000"}},[a("span",[e._v("×")]),e._v(e._s(t.quantity))])])]),e._v(" "),a("div",{staticClass:"flex flex-pack-justify flex-align-center"},[a("span",{staticStyle:{color:"#999"}},[e._v(e._s(t.typeName))]),e._v(" "),a("span",{},[e._v(e._s(t.decoctingType))]),e._v(" "),a("span",{},[e._v(e._s(t.producingArea))]),e._v(" "),a("span",{staticStyle:{color:"red","font-size":"16px"}},[e._v("￥"+e._s(t.shouldpay))])]),e._v(" "),a("div",{staticClass:"flex flex-pack-justify flex-align-center"},[a("div",{staticClass:"flex-1"},[e._v(e._s(t.manufacturer))]),e._v(" "),a("div",{staticClass:"flex-1",staticStyle:{"text-align":"center"}},[e._v(e._s(t.partnerName))])]),e._v(" "),a("div",{staticClass:"flex flex-pack-justify flex-align-center"},[a("div",{staticClass:"flex-1"},[e._v("使用说明："+e._s(t.instructions))])])])])})],2)]):e._e()])]):e._e()])}))])])]),e._v(" "),a("el-tab-pane",{attrs:{label:"膏方",name:"PASTE_PRESCRIPTION"}},[a("div",{staticClass:"item_box_wp"},[a("div",{staticClass:"voice_2"},[a("ul",e._l(2,function(t,r){return a("li",{class:["li"+(r+1),r==e.selectlabel?"bigwidth":"smallwidth"],on:{click:function(t){e.selectlabel=r}}},[r!==e.selectlabel?a("div",{staticClass:"fold"},[a("span",{staticClass:"img"},[a("img",0==r?{staticStyle:{width:"100%"},attrs:{src:i("GpMq")}}:{staticStyle:{width:"100%"},attrs:{src:i("QXmb")}})])]):e._e(),e._v(" "),r===e.selectlabel?a("div",{staticClass:"unfold"},[a("dl",[0==r?a("div",{staticStyle:{width:"100%","padding-top":"30px"}},[a("el-form",{attrs:{"label-width":"120px",size:"mini"}},[a("el-form-item",{attrs:{label:"药材名称："}},[a("el-select",{staticStyle:{width:"85%"},attrs:{filterable:"",clearable:"",remote:"",placeholder:"请输入药品","remote-method":e.remoteMethod,loading:e.loading},on:{change:e.selectDrug},model:{value:e.drug.drugId,callback:function(t){e.$set(e.drug,"drugId",t)},expression:"drug.drugId"}},e._l(e.options4,function(t){return a("el-option",{key:t.drugId,attrs:{label:e.handleLabel([t.commonName,t.productName,t.producingArea,t.typeName]),value:t.drugId}})}))],1),e._v(" "),a("el-form-item",{attrs:{label:"供应商："}},[a("el-input",{staticStyle:{width:"85%"},attrs:{placeholder:"请输入供应商"},model:{value:e.drug.manufacturer,callback:function(t){e.$set(e.drug,"manufacturer",t)},expression:"drug.manufacturer"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"单位："}},[a("el-input",{staticStyle:{width:"85%"},attrs:{placeholder:"请输入单位"},model:{value:e.drug.packing_unit,callback:function(t){e.$set(e.drug,"packing_unit",t)},expression:"drug.packing_unit"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"类型："}},[a("el-select",{staticStyle:{width:"85%"},attrs:{placeholder:"请选择类型",loading:e.loading},model:{value:e.drug.chineseType,callback:function(t){e.$set(e.drug,"chineseType",t)},expression:"drug.chineseType"}},[a("el-option",{attrs:{label:"普通",value:"普通"}}),e._v(" "),a("el-option",{attrs:{label:"贵细",value:"贵细"}}),e._v(" "),a("el-option",{attrs:{label:"毒性",value:"毒性"}})],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"单价："}},[a("el-input",{staticStyle:{width:"85%"},attrs:{placeholder:"请输入单价"},model:{value:e.drug.price,callback:function(t){e.$set(e.drug,"price",t)},expression:"drug.price"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"数量："}},[a("el-input",{staticStyle:{width:"85%"},attrs:{placeholder:"请输入数量"},model:{value:e.drug.quantity,callback:function(t){e.$set(e.drug,"quantity",t)},expression:"drug.quantity"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"药品价格："}},[e._v("\n                      "+e._s(e.drug_total)+"\n\t")]),e._v(" "),a("el-form-item",{attrs:{label:"使用说明："}},[a("el-input",{staticStyle:{width:"85%"},attrs:{type:"text",rows:4,placeholder:"请输入使用说明"},model:{value:e.instructions,callback:function(t){e.instructions=t},expression:"instructions"}})],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{size:"mini",type:"primary",disabled:e.loading},on:{click:function(t){e.docreateDrug()}}},[e._v("提交")])],1)],1)],1):e._e(),e._v(" "),1==r?a("div",[a("div",{staticStyle:{padding:"10px"}},[a("div",[a("div",{staticClass:"flex flex-pack-justify flex-align-center",staticStyle:{height:"28px"}},[a("div",{staticStyle:{"font-size":"16px"}},[e._v("共"+e._s(e.PASTE_preDrugList.length)+"条")]),e._v(" "),a("div",{staticStyle:{"padding-right":"20px",color:"red","font-size":"16px"}},[e._v("合计:￥"+e._s(e.PASTE_preDrugListtotal.toFixed(2)))])])]),e._v(" "),a("div",{staticClass:" everyNum",staticStyle:{"font-size":"12px","text-align":"right"}},[e._v("\n      膏方制作费：5kg内410元；以上80元/kg\n")]),e._v(" "),a("div",{staticClass:" everyNum",staticStyle:{"font-size":"12px","text-align":"right"}},[e._v("\n   制作费："),a("span",{staticStyle:{color:"red"}},[e._v("￥"+e._s(e.makeMoney))])]),e._v(" "),a("el-form",{attrs:{"label-width":"120px",inline:"true"}},[a("el-form-item",{staticStyle:{"font-size":"14px"},attrs:{label:"用法用量："}},[a("div",{staticClass:"flex everyNum",staticStyle:{"font-size":"12px"}},[a("div",[e._v("每日")]),e._v(" "),a("div",[a("el-input",{staticStyle:{"max-width":"50px"},attrs:{size:"mini",type:"text",placeholder:"输入数量"},model:{value:e.everydayTime,callback:function(t){e.everydayTime=t},expression:"everydayTime"}})],1),e._v(" "),a("div",[e._v("次，1次")]),e._v(" "),a("div",[a("el-input",{staticStyle:{"max-width":"50px"},attrs:{size:"mini",type:"text",placeholder:"输入数量"},model:{value:e.everytimes,callback:function(t){e.everytimes=t},expression:"everytimes"}})],1),e._v(" "),a("div",[e._v("克，约服")]),e._v(" "),a("div",[a("el-input",{staticStyle:{"max-width":"50px"},attrs:{size:"mini",type:"text",placeholder:"输入数量"},model:{value:e.howManyDay,callback:function(t){e.howManyDay=t},expression:"howManyDay"}})],1),e._v(" "),a("div",[e._v("天")])])])],1),e._v(" "),a("div",{staticStyle:{"padding-left":"36px","font-size":"13.8px"}},[e._v("选择要添加的辅料：")]),e._v(" "),a("el-form",{attrs:{"label-width":"100px"}},[a("el-form-item",{attrs:{label:"糖类："}},[a("div",{staticClass:"flex flex-warp-justify"},e._l(e.sugarTypeList,function(t,i){return a("div",{staticClass:"lanbelBox",class:e.sugarType[i]==t?"lanbelBox_active":"lanbelBox_notactive",on:{click:function(a){e.sugarTypechange(t,i,"sugarType")}}},[e._v(e._s(t))])}))]),e._v(" "),a("el-form-item",{attrs:{label:"代糖："}},[a("div",{staticClass:"flex flex-warp-justify"},e._l(e.aspartameList,function(t,i){return a("div",{staticClass:"lanbelBox",class:e.aspartame[i]==t?"lanbelBox_active":"lanbelBox_notactive",on:{click:function(a){e.sugarTypechange(t,i,"aspartame")}}},[e._v(e._s(t))])}))]),e._v(" "),a("el-form-item",{attrs:{label:"其他："}},[a("div",{staticClass:"flex flex-warp-justify"},e._l(e.otherAccessoriesList,function(t,i){return a("div",{staticClass:"lanbelBox",class:e.otherAccessories[i]==t?"lanbelBox_active":"lanbelBox_notactive",on:{click:function(a){e.sugarTypechange(t,i,"otherAccessories")}}},[e._v(e._s(t))])}))])],1),e._v(" "),e._l(e.PASTE_preDrugList,function(t,i){return a("div",{staticClass:"flex  flex-align-center"},[a("div",[a("div",{staticStyle:{"text-align":"center","font-size":"15px","margin-right":"10px"}},[e._v("   "+e._s(i+1))]),e._v(" "),a("div",{staticClass:"shanchukuai flex  flex-align-center flex-pack-center",on:{click:function(a){e.deletePreDrug(i,t)}}},[a("i",{staticClass:"iconfont icon-iconfontshanchu3"})])]),e._v(" "),a("div",{staticClass:"flex-1",staticStyle:{border:"1px solid #c8c6c6","margin-bottom":"10px",padding:"5px"}},[a("div",{staticClass:"flex flex-pack-justify flex-align-center",staticStyle:{color:"#999"}},[a("div",[e._v(e._s(t.codeId)+" ")]),e._v(" "),a("div",[e._v(e._s(t.createDate)+" ")])]),e._v(" "),a("div",{staticClass:"flex flex-pack-justify flex-align-center"},[a("span",{staticStyle:{"font-size":"16px",color:"#000"}},[e._v(e._s(t.drugName)+"("+e._s(t.productName)+")")]),e._v(" "),a("span",{},[e._v("￥"+e._s(t.price)+" "),a("span",{staticStyle:{"font-size":"16px",color:"#000"}},[a("span",[e._v("×")]),e._v(e._s(t.quantity))])])]),e._v(" "),a("div",{staticClass:"flex flex-pack-justify flex-align-center"},[a("span",{staticStyle:{color:"#999"}},[e._v(e._s(t.typeName))]),e._v(" "),a("span",{},[e._v(e._s(t.decoctingType))]),e._v(" "),a("span",{},[e._v(e._s(t.producingArea))]),e._v(" "),a("span",{staticStyle:{color:"red","font-size":"16px"}},[e._v("￥"+e._s(t.shouldpay))])]),e._v(" "),a("div",{staticClass:"flex flex-pack-justify flex-align-center"},[a("div",{staticClass:"flex-1"},[e._v(e._s(t.manufacturer))]),e._v(" "),a("div",{staticClass:"flex-1",staticStyle:{"text-align":"center"}},[e._v(e._s(t.partnerName))])]),e._v(" "),a("div",{staticClass:"flex flex-pack-justify flex-align-center"},[a("div",{staticClass:"flex-1"},[e._v("使用说明："+e._s(t.instructions))])])])])})],2)]):e._e()])]):e._e()])}))])])]),e._v(" "),a("el-tab-pane",{attrs:{label:"器械",name:"INSTRUMENTS"}},[a("div",{staticClass:"item_box_wp"},[a("div",{staticClass:"voice_2"},[a("ul",e._l(2,function(t,r){return a("li",{class:["li"+(r+1),r==e.selectlabel?"bigwidth":"smallwidth"],on:{click:function(t){e.selectlabel=r}}},[r!==e.selectlabel?a("div",{staticClass:"fold"},[a("span",{staticClass:"img"},[a("img",0==r?{staticStyle:{width:"100%"},attrs:{src:i("GpMq")}}:{staticStyle:{width:"100%"},attrs:{src:i("QXmb")}})])]):e._e(),e._v(" "),r===e.selectlabel?a("div",{staticClass:"unfold"},[a("dl",[0==r?a("div",{staticStyle:{width:"100%","padding-top":"30px"}},[a("el-form",{attrs:{"label-width":"120px",size:"mini"}},[a("el-form-item",{attrs:{label:"器械名称："}},[a("el-select",{staticStyle:{width:"85%"},attrs:{filterable:"",clearable:"",remote:"",placeholder:"请输入药品","remote-method":e.remoteMethod,loading:e.loading},on:{change:e.selectDrug},model:{value:e.drug.drugId,callback:function(t){e.$set(e.drug,"drugId",t)},expression:"drug.drugId"}},e._l(e.options4,function(t){return a("el-option",{key:t.drugId,attrs:{label:e.handleLabel([t.commonName,t.productName,t.producingArea,t.specification]),value:t.drugId}})}))],1),e._v(" "),a("el-form-item",{attrs:{label:"供应商："}},[a("el-input",{staticStyle:{width:"85%"},attrs:{placeholder:"请输入供应商"},model:{value:e.drug.manufacturer,callback:function(t){e.$set(e.drug,"manufacturer",t)},expression:"drug.manufacturer"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"单位："}},[a("el-input",{staticStyle:{width:"85%"},attrs:{placeholder:"请输入单位"},model:{value:e.drug.packing_unit,callback:function(t){e.$set(e.drug,"packing_unit",t)},expression:"drug.packing_unit"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"单价："}},[a("el-input",{staticStyle:{width:"85%"},attrs:{placeholder:"请输入单价"},model:{value:e.drug.price,callback:function(t){e.$set(e.drug,"price",t)},expression:"drug.price"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"数量："}},[a("el-input",{staticStyle:{width:"85%"},attrs:{placeholder:"请输入数量"},model:{value:e.drug.quantity,callback:function(t){e.$set(e.drug,"quantity",t)},expression:"drug.quantity"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"药品价格："}},[e._v("\n                      "+e._s(e.drug_total)+"\n\t")]),e._v(" "),a("el-form-item",{attrs:{label:"使用说明："}},[a("el-input",{staticStyle:{width:"85%"},attrs:{type:"text",rows:4,placeholder:"请输入使用说明"},model:{value:e.instructions,callback:function(t){e.instructions=t},expression:"instructions"}})],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{size:"mini",type:"primary",disabled:e.loading},on:{click:function(t){e.docreateDrug()}}},[e._v("提交")])],1)],1)],1):e._e(),e._v(" "),1==r?a("div",[a("div",{staticStyle:{padding:"10px"}},[a("div",[a("div",{staticClass:"flex flex-pack-justify flex-align-center",staticStyle:{height:"28px"}},[a("div",{staticStyle:{"font-size":"16px"}},[e._v("共"+e._s(e.INSTRUMENTS_preDrugList.length)+"条")]),e._v(" "),a("div",{staticStyle:{"padding-right":"20px",color:"red","font-size":"16px"}},[e._v("合计:￥"+e._s(e.INSTRUMENTS_preDrugListtotal.toFixed(2)))])])]),e._v(" "),e._l(e.INSTRUMENTS_preDrugList,function(t,i){return a("div",{staticClass:"flex  flex-align-center"},[a("div",[a("div",{staticStyle:{"text-align":"center","font-size":"15px","margin-right":"10px"}},[e._v("   "+e._s(i+1))]),e._v(" "),a("div",{staticClass:"shanchukuai flex  flex-align-center flex-pack-center",on:{click:function(a){e.deletePreDrug(i,t)}}},[a("i",{staticClass:"iconfont icon-iconfontshanchu3"})])]),e._v(" "),a("div",{staticClass:"flex-1",staticStyle:{border:"1px solid #c8c6c6","margin-bottom":"10px",padding:"5px"}},[a("div",{staticClass:"flex flex-pack-justify flex-align-center",staticStyle:{color:"#999"}},[a("div",[e._v(e._s(t.codeId)+" ")]),e._v(" "),a("div",[e._v(e._s(t.createDate)+" ")])]),e._v(" "),a("div",{staticClass:"flex flex-pack-justify flex-align-center"},[a("span",{staticStyle:{"font-size":"16px",color:"#000"}},[e._v(e._s(t.drugName)+"("+e._s(t.productName)+")")]),e._v(" "),a("span",{},[e._v("￥"+e._s(t.price)+" "),a("span",{staticStyle:{"font-size":"16px",color:"#000"}},[a("span",[e._v("×")]),e._v(e._s(t.quantity))])])]),e._v(" "),a("div",{staticClass:"flex flex-pack-justify flex-align-center"},[a("span",{staticStyle:{color:"#999","font-weight":"600"}},[e._v(e._s(t.specification))]),e._v(" "),a("span",{staticStyle:{color:"red","font-size":"16px"}},[e._v("￥"+e._s(t.shouldpay))])]),e._v(" "),a("div",{staticClass:"flex flex-pack-justify flex-align-center"},[a("div",{staticClass:"flex-1"},[e._v(e._s(t.manufacturer))]),e._v(" "),a("div",{staticClass:"flex-1",staticStyle:{"text-align":"center"}},[e._v(e._s(t.partnerName))])]),e._v(" "),a("div",{staticClass:"flex flex-pack-justify flex-align-center"},[a("div",{staticClass:"flex-1"},[e._v("使用说明："+e._s(t.instructions))])])])])})],2)]):e._e()])]):e._e()])}))])])])],1)],1)],1),e._v(" "),a("div"),e._v(" "),a("div",{staticStyle:{"text-align":"right",padding:"15px"}},[a("el-input",{attrs:{type:"textarea",rows:4,placeholder:"转方备注/退回原因"},model:{value:e.tranRemake,callback:function(t){e.tranRemake=t},expression:"tranRemake"}})],1),e._v(" "),a("div",{staticStyle:{"text-align":"right","margin-right":"20px"}},["DOC_HANDWORK"==e.pres_type||"BACK_HANDWORK"==e.pres_type?a("div",[e._v("\n    治疗服务费：\n          "),a("el-input",{staticStyle:{"max-width":"180px"},attrs:{size:"small",rows:4,placeholder:"请输入治疗服务费"},model:{value:e.serviceMoney,callback:function(t){e.serviceMoney=t},expression:"serviceMoney"}},[a("template",{slot:"append"},[e._v("元")])],2)],1):a("div",[e._v("治疗服务费："),a("span",{staticStyle:{color:"red"}},[e._v("￥"+e._s(e.serviceMoney))])]),e._v(" "),a("div",[e._v("药品合计："),a("span",{staticStyle:{color:"red"}},[e._v("￥"+e._s(parseFloat(e.CHINESE_preDrugListtotal+e.WESTERN_preDrugListtotal+e.PASTE_preDrugListtotal+e.INSTRUMENTS_preDrugListtotal).toFixed(2)))])]),e._v(" "),a("div",[e._v("合计："),a("span",{staticStyle:{color:"red"}},[e._v("￥"+e._s(parseFloat(e.CHINESE_preDrugListtotal+e.WESTERN_preDrugListtotal+e.PASTE_preDrugListtotal+e.INSTRUMENTS_preDrugListtotal+parseFloat(e.replaceDecoctingMoney)+parseFloat(e.makeMoney)+parseFloat(e.serviceMoney)).toFixed(2)))])])]),e._v(" "),a("div",{staticStyle:{display:"flex","justify-content":"space-between",padding:"15px"}},[a("div",[a("el-button",{attrs:{type:"text",disabled:"BACK_HANDWORK"===e.pres_type},on:{click:function(t){e.doSubmit()}}},[e._v("退回")])],1),e._v(" "),a("div",[a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.dotransmit()}}},[e._v("转方")])],1)]),e._v(" "),a("el-dialog",{staticClass:"filter_box",attrs:{width:"70vw","close-on-click-modal":!1,title:"搜索","append-to-body":!0,visible:e.filter_model},on:{"update:visible":function(t){e.filter_model=t}}},[a("div",[a("div",{staticClass:"filter_select",staticStyle:{padding:"10px","text-align":"left"}},[a("el-input",{staticClass:"input-with-select",staticStyle:{"min-width":"200px","max-width":"400px"},attrs:{placeholder:"请"+("doctor"===e.filter_type?"医生":"患者")+"输入姓名或手机号",size:"small"},model:{value:e.mobile,callback:function(t){e.mobile=t},expression:"mobile"}},[a("el-select",{staticClass:"filter_select",attrs:{slot:"prepend",placeholder:"请选择"},slot:"prepend",model:{value:e.filter_type,callback:function(t){e.filter_type=t},expression:"filter_type"}},[a("el-option",{attrs:{label:"医生",value:"doctor",disabled:"DOC_HANDWORK"==e.pres_type}}),e._v(" "),a("el-option",{attrs:{label:"患者",value:"menber"}})],1),e._v(" "),a("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:function(t){e.filtering()}},slot:"append"})],1)],1),e._v(" "),a("div",{directives:[{name:"bouncing",rawName:"v-bouncing",value:e.noMessage_loading,expression:"noMessage_loading"}],staticStyle:{height:"500px",overflow:"auto"}},[e.noMessage_model?a("div",{staticClass:"flex flex-pack-center  flex-align-center",staticStyle:{height:"100%"}},[a("i",{staticClass:"iconfont icon-shangxin",staticStyle:{"font-size":"90px"}}),e._v(" "),a("div",[a("div",[e._v("搜索不到任何"+e._s("doctor"===e.filter_type?"医生":"患者"))]),e._v(" "),a("div",{staticStyle:{color:"#8492a6","font-size":"13px"}},[e._v("试试输入准确的信息吧~")])])]):e._e(),e._v(" "),a("div",{staticClass:"flex flex-warp-justify"},e._l(e.resultList,function(t,r){return a("div",{staticClass:"flex doctorCard textLabel",on:{click:function(i){e.select_item(t)}}},[t.doctorId?a("img",{staticStyle:{height:"80px",width:"80px",margin:"5px 10px"},attrs:{src:i("qoG6")}}):e._e(),e._v(" "),t.memberId?a("img",{staticStyle:{height:"80px",width:"80px",margin:"5px 10px"},attrs:{src:i("gAzu")}}):e._e(),e._v(" "),a("div",{staticClass:"textLabel",staticStyle:{"line-height":"20px"}},[a("div",{staticClass:"textLabel"},[e._v(e._s(t.name))]),e._v(" "),a("div",[e._v(e._s(t.phone))]),e._v(" "),t.docterId?a("div",[a("div",{staticClass:"textLabel",staticStyle:{"text-align":"left"}},[e._v("医院："),a("span",{staticStyle:{color:"#8492a6","font-size":"13px"}},[e._v(e._s(t.hospitalName))])]),e._v(" "),a("div",{staticClass:"textLabel",staticStyle:{"text-align":"left"}},[e._v("科室："),a("span",{staticStyle:{color:"#8492a6","font-size":"13px"}},[e._v(e._s(t.docterDept))])])]):a("div",[a("div",{staticClass:"textLabel",staticStyle:{"text-align":"left"}},[a("span",[e._v(" 性别："),a("span",{staticStyle:{color:"#8492a6","font-size":"13px"}},[e._v(e._s(t.sex?t.sex:"-"))])]),e._v(" "),a("span",{staticStyle:{"margin-left":"10px"}},[e._v("  年龄："),a("span",{staticStyle:{color:"#8492a6","font-size":"13px"}},[e._v(e._s(t.age?t.age:"-"))])])]),e._v(" "),a("div",{staticClass:"textLabel",staticStyle:{"text-align":"left"}},[e._v("身份证："),a("span",{staticStyle:{color:"#8492a6","font-size":"13px"}},[e._v(e._s(t.idCard?t.idCard:"-"))])])])])])}))])])]),e._v(" "),a("el-dialog",{attrs:{width:"50vw","close-on-click-modal":!1,title:"确认转方","append-to-body":!0,visible:e.dialogFormVisible},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[a("el-checkbox-group",{model:{value:e.checkList,callback:function(t){e.checkList=t},expression:"checkList"}},[a("div",[a("el-checkbox",{attrs:{label:"CHINESE_MEDICINE",disabled:0==e.CHINESE_preDrugList.length}},[e._v("中药")])],1),e._v(" "),a("div",[a("el-checkbox",{attrs:{label:"WESTERN_MEDICINE",disabled:0==e.WESTERN_preDrugList.length}},[e._v("西药")])],1),e._v(" "),a("div",[a("el-checkbox",{attrs:{label:"PASTE_PRESCRIPTION",disabled:0==e.PASTE_preDrugList.length}},[e._v("膏方")])],1),e._v(" "),a("div",[a("el-checkbox",{attrs:{label:"INSTRUMENTS",disabled:0==e.INSTRUMENTS_preDrugList.length}},[e._v("器械")])],1)]),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.submitcheckList}},[e._v("确 定")])],1)],1),e._v(" "),a("el-dialog",{attrs:{width:"50vw","close-on-click-modal":!1,title:"特殊药材确认","append-to-body":!0,visible:e.drugAdrugModel},on:{"update:visible":function(t){e.drugAdrugModel=t}}},[a("div",{staticStyle:{"font-size":"16px"}},[e._v("以下药材不宜同用:")]),e._v(" "),e._l(e.drugAdrugList,function(t){return a("div",{staticStyle:{"font-size":"14.8px",margin:"5px 0"}},[a("span",{staticStyle:{color:"#e6a23c"}},[e._v(e._s(t.guest))]),e._v("与"),a("span",{staticStyle:{color:"#e6a23c"}},[e._v(e._s(t.honour))])])}),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.drugAdrugModel=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.drugListAudit}},[e._v("确认药方")])],1)],2)],1)},staticRenderFns:[]};var m=i("VU/8")(u,g,!1,function(e){i("8ud+"),i("BAFi")},"data-v-abb7e550",null);t.default=m.exports}});
//# sourceMappingURL=2.187853145059046543f7.js.map